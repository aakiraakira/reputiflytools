<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Reputifly Override Generator</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        zinc: { 850: '#1f1f22', 900: '#18181b', 950: '#09090b' },
                        accent: { 600: '#2563eb', 500: '#3b82f6' }
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.15)',
                    }
                }
            }
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #09090b;
            color: #F3F4F6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Professional Card */
        .pro-card {
            background-color: #18181b;
            border: 1px solid #27272a;
            box-shadow: theme('boxShadow.card');
            display: flex;
            flex-direction: column;
        }

        /* High Contrast Input */
        .pro-input {
            background-color: #000000;
            border: 1px solid #3f3f46;
            color: #ffffff;
            transition: border-color 0.2s ease;
            font-family: 'Menlo', 'Monaco', monospace;
        }
        .pro-input:focus {
            border-color: #3b82f6;
            outline: none;
        }
        .pro-input::placeholder { color: #52525b; }

        /* Buttons */
        .btn-pill {
            border-radius: 9999px;
            padding: 10px 20px;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            display: inline-flex; align-items: center; justify-content: center; gap: 8px;
            cursor: pointer;
            white-space: nowrap;
        }

        .btn-primary {
            background-color: #2563eb; color: white; border: 1px solid transparent;
        }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-primary:active { transform: scale(0.98); }

        .btn-secondary {
            background-color: #27272a; border: 1px solid #3f3f46; color: #e4e4e7;
        }
        .btn-secondary:hover { background-color: #3f3f46; color: white; }

        /* Upload Overlay */
        .editor-wrapper { position: relative; flex-grow: 1; display: flex; flex-direction: column; }
        
        .upload-overlay {
            position: absolute; inset: 0;
            display: flex; align-items: center; justify-content: center;
            background: rgba(9, 9, 11, 0.9);
            border: 2px dashed #3b82f6;
            opacity: 0; pointer-events: none; transition: all 0.2s; z-index: 20;
            border-radius: 0.5rem;
        }
        .editor-wrapper.drag-active .upload-overlay { opacity: 1; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #18181b; }
        ::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 4px; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div class="w-full max-w-7xl mx-auto p-4 md:p-6 lg:p-8 flex flex-col flex-grow">
        
        <header class="flex justify-center items-center py-4 mb-6 md:mb-8 border-b border-zinc-800">
            <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png" 
                 alt="Reputifly" 
                 class="h-10 md:h-12 w-auto object-contain">
        </header>

        <main class="flex flex-col lg:grid lg:grid-cols-2 gap-6 flex-grow">
            
            <div class="pro-card rounded-xl overflow-hidden h-[500px] lg:h-auto">
                <div class="px-4 py-3 border-b border-zinc-800 bg-zinc-900 flex flex-wrap gap-3 justify-between items-center shrink-0">
                    <h2 class="text-xs font-semibold text-zinc-400 uppercase tracking-widest flex items-center gap-2">
                        <svg class="w-4 h-4 text-zinc-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/></svg>
                        Source Code
                    </h2>
                    <div class="flex gap-2">
                         <label for="fileUpload" class="btn-pill btn-secondary cursor-pointer text-xs !py-1.5 !px-3">
                            Upload
                        </label>
                        <input type="file" id="fileUpload" class="hidden" onchange="handleFileUpload(this.files)">
                        <button class="btn-pill btn-secondary text-xs !py-1.5 !px-3 text-red-400 hover:bg-red-900/20 hover:border-red-800" onclick="clearInput()">Clear</button>
                    </div>
                </div>
                
                <div class="editor-wrapper p-4 h-full" id="dropZone">
                    <div class="upload-overlay">
                        <span class="text-blue-500 font-semibold text-sm md:text-base flex items-center gap-2">
                             <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                            Drop File
                        </span>
                    </div>
                    <textarea id="inputCode" class="pro-input w-full h-full rounded-lg p-4 resize-none text-xs md:text-sm leading-relaxed" placeholder="// Paste your code here..."></textarea>
                </div>
                
                <div class="p-4 border-t border-zinc-800 bg-zinc-900/50 shrink-0">
                    <button class="btn-pill btn-primary w-full shadow-lg" onclick="generatePrompt()">
                        Generate Prompt
                    </button>
                </div>
            </div>

            <div class="pro-card rounded-xl overflow-hidden h-[500px] lg:h-auto">
                <div class="px-4 py-3 border-b border-zinc-800 bg-zinc-900 flex justify-between items-center shrink-0">
                     <h2 class="text-xs font-semibold text-zinc-400 uppercase tracking-widest flex items-center gap-2">
                        <svg class="w-4 h-4 text-zinc-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                        AI Instructions
                    </h2>
                    <span id="statusBadge" class="hidden px-2 py-0.5 rounded text-[10px] font-bold bg-green-900/30 text-green-400 border border-green-900">READY</span>
                </div>
                
                <div class="p-4 flex-grow h-full relative">
                    <textarea id="outputPrompt" class="pro-input w-full h-full rounded-lg p-4 resize-none text-xs md:text-sm text-zinc-300 leading-relaxed" readonly placeholder="Output will appear here..."></textarea>
                </div>
                
                <div class="p-4 border-t border-zinc-800 bg-zinc-900/50 flex flex-col sm:flex-row gap-3 shrink-0">
                    <button class="btn-pill btn-secondary flex-1 justify-center" onclick="downloadZip()">
                        <svg class="w-4 h-4 text-zinc-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                        Download ZIP
                    </button>
                    <button class="btn-pill btn-primary flex-1 justify-center" id="copyBtn" onclick="copyToClipboard()">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/></svg>
                        Copy Prompt
                    </button>
                </div>
            </div>

        </main>
    </div>

    <script>
        // --- CONSTANTS ---
        const WRAPPER_ID = 'cms-override-wrapper';

        // --- DRAG & DROP HANDLING ---
        const dropZone = document.getElementById('dropZone');
        const inputCode = document.getElementById('inputCode');

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) { e.preventDefault(); e.stopPropagation(); }
        ['dragenter', 'dragover'].forEach(eventName => dropZone.classList.add('drag-active'));
        ['dragleave', 'drop'].forEach(eventName => dropZone.classList.remove('drag-active'));
        dropZone.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            handleFileUpload(dt.files);
        }

        function handleFileUpload(files) {
            if (files.length > 0) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    inputCode.value = e.target.result;
                    generatePrompt();
                };
                reader.readAsText(files[0]);
            }
        }

        // --- CORE LOGIC ---
        function generatePrompt() {
            let code = inputCode.value;
            
            if (!code.trim()) { alert("Please paste code or upload a file first."); return; }

            // CRITICAL: Escape backticks and template literals so the Prompt itself doesn't break
            // This prevents nested code snippets from closing the template literal early
            code = code.replace(/`/g, '\\`').replace(/\${/g, '\\${');

            const prompt = `
I am migrating this code to a managed CMS (like WordPress) that has aggressive default styles (red borders, strange padding, huge images etc.).

I need you to give me the **UPDATED FULL CODE**. 

### 1. FORCE OVERRIDE STRATEGY (CRITICAL)
* **Wrap:** Enclose the entire body content in a specific ID: \`#${WRAPPER_ID}\`.
* **Tailwind Config:** Add the script: \`tailwind.config = { important: '#${WRAPPER_ID}', ... }\`.
* **CSS Nuclear Reset:** Add a \`<style>\` block scoped to \`#${WRAPPER_ID}\` that uses \`!important\` to strip CMS themes:
    * **Buttons & Inputs:** \`border: 0 none !important; background: transparent !important; outline: none !important; box-shadow: none !important; padding: 0;\` (Fixes red border/square box glitch).
    * **Focus States:** Remove default focus rings.
    * **Links:** Remove text-decoration and border-bottoms.
    * **Headings:** Reset margins and line-heights.

### 2. IMAGE & MEDIA SAFETY (Prevent "Big Logo" Issue)
* **Hard-Code Dimensions:** CMS themes often strip height attributes or default images to 100% width. You MUST add explicit Tailwind classes (e.g., \`h-10 w-auto\`, \`max-w-[200px]\`) to ALL \`<img>\` tags, logos, and icons. Do not rely on "auto" alone.

### 3. CONTENT PRESERVATION & ASSETS
* **Zero Data Loss:** Do NOT summarize or remove sections. If the input has 5 testimonials, output 5. If it has a footer, output the footer.
* **Icons:** Replace ANY text emojis (e.g., "✔️", "➕") with professional inline SVG icons.
* **Adaptive Styling:** If raw HTML inputs exist, force style them using the project's color palette (e.g., primary blue) so they don't revert to browser defaults.

### 4. OUTPUT
* Provide the single, copy-pasteable HTML file containing the CSS, JS, and HTML structure.

**Here is the source code:**

\`\`\`html
${code}
\`\`\`
            `;

            document.getElementById('outputPrompt').value = prompt.trim();
            document.getElementById('statusBadge').classList.remove('hidden');
        }

        // --- UTILS ---
        function downloadZip() {
            const promptContent = document.getElementById('outputPrompt').value;
            const sourceContent = document.getElementById('inputCode').value;
            if (!promptContent) { alert("Please generate the prompt first."); return; }
            const zip = new JSZip();
            zip.file("prompt_instructions.txt", promptContent);
            // We un-escape the code for the ZIP file so it's clean
            if (sourceContent) zip.file("source_code.html", sourceContent.replace(/\\`/g, '`').replace(/\\\${/g, '${'));
            zip.generateAsync({type:"blob"}).then(c => saveAs(c, "reputifly_override_pack.zip"));
        }

        function copyToClipboard() {
            const outputText = document.getElementById('outputPrompt');
            if (!outputText.value) return;
            outputText.select(); document.execCommand('copy');
            if (navigator.clipboard) navigator.clipboard.writeText(outputText.value);
            
            const btn = document.getElementById('copyBtn');
            const originalHtml = btn.innerHTML;
            btn.innerHTML = `<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg> COPIED!`;
            btn.classList.add('bg-green-600'); // Visual feedback
            setTimeout(() => {
                btn.innerHTML = originalHtml;
                btn.classList.remove('bg-green-600');
            }, 2000);
        }

        function clearInput() {
            inputCode.value = '';
            document.getElementById('outputPrompt').value = '';
            document.getElementById('statusBadge').classList.add('hidden');
        }
    </script>
</body>
</html>
