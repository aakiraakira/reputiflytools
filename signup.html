<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reputifly | The AI Workspace</title>

    <link rel="icon" type="image/png" href="https://media.licdn.com/dms/image/v2/D560BAQEScnUkJITXAg/company-logo_200_200/B56ZajOckKHsAI-/0/1746495195792?e=2147483647&v=beta&t=Z7yQpp5jSwm-De46D45WIC5fY_2w0GVgEWLoEOM1aug">
    <meta name="theme-color" content="#0B0A14">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        :root {
            --bg-main: #0B0A14;
            --accent-primary: #E6397F;
            --accent-secondary: #FF8A00;
            --text-main: #F0F0F0;
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(20, 20, 30, 0.6);
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-main);
            background: #0B0A14;
            overflow-x: hidden;
            margin: 0;
        }

        h1, h2, h3, .brand-font { font-family: 'Space Grotesk', sans-serif; }

        /* --- 3D Background --- */
        #hero-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.5;
            pointer-events: none;
        }

        /* --- Dynamic Gradient Text Animation --- */
        .dynamic-gradient-text {
            background: linear-gradient(to right, #E6397F, #FF8A00, #E6397F);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: text-shimmer 3s linear infinite;
            font-weight: 800;
        }
        @keyframes text-shimmer { to { background-position: 200% center; } }

        /* --- UI Components --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .nav-glass {
            background: rgba(11, 10, 20, 0.6);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: transform 0.3s ease, background 0.3s ease;
        }
        .nav-glass.hidden-nav { transform: translateY(-100%); }
        .nav-glass.scrolled { background: rgba(5, 5, 10, 0.95); box-shadow: 0 4px 20px rgba(0,0,0,0.6); }

        .btn-primary {
            background: linear-gradient(90deg, #E6397F, #FF8A00);
            color: white;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(230, 57, 127, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 40px rgba(255, 138, 0, 0.5);
        }

        .forge-tab {
            border-bottom: 2px solid transparent;
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .forge-tab.active {
            border-bottom-color: var(--accent-primary);
            opacity: 1;
            color: white;
        }
        
        .console-line {
            font-family: 'SFMono-Regular', Consolas, monospace;
            font-size: 12px;
            opacity: 0;
            transform: translateX(-10px);
            animation: slideIn 0.3s forwards;
            margin-bottom: 4px;
            padding: 4px 8px;
            border-left: 2px solid var(--accent-primary);
            background: rgba(255, 255, 255, 0.03);
            border-radius: 0 4px 4px 0;
        }
        @keyframes slideIn { to { opacity: 1; transform: translateX(0); } }

        /* --- PROPER OS CURSOR (UPDATED URL) --- */
        .mouse-pointer {
            position: absolute;
            z-index: 50;
            width: 24px;
            height: 32px;
            /* UPDATED CURSOR IMAGE */
            background-image: url('https://www.freeiconspng.com/uploads/mac-cursor-6.png');
            background-repeat: no-repeat;
            background-size: contain;
            transition: top 0.5s cubic-bezier(0.25, 1, 0.5, 1), left 0.5s cubic-bezier(0.25, 1, 0.5, 1), transform 0.1s ease;
            pointer-events: none;
            filter: drop-shadow(0 2px 5px rgba(0,0,0,0.3));
        }

        .mouse-pointer::after {
            content: attr(data-label);
            position: absolute;
            left: 18px;
            top: 18px;
            background: var(--accent-primary);
            color: white;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 6px;
            white-space: nowrap;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0.9;
        }
        .mouse-pointer.clicking { transform: scale(0.9); }

        .demo-modal {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: #1E1E2E;
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 10;
            width: 80%;
            max-width: 350px;
        }
        .demo-modal.visible {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        /* Quiz Specifics */
        .quiz-option {
            transition: all 0.2s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .quiz-option.correct {
            background-color: rgba(34, 197, 94, 0.15);
            border-color: #22c55e;
        }
        .quiz-option.wrong {
            background-color: rgba(239, 68, 68, 0.15);
            border-color: #ef4444;
        }
        
        .demo-cursor {
            width: 2px; height: 1.2em;
            background: var(--accent-secondary);
            display: inline-block;
            animation: blink 1s infinite;
            vertical-align: bottom;
        }
        @keyframes blink { 50% { opacity: 0; } }

        .notification-toast {
            position: absolute;
            top: 20px; right: 20px;
            background: #211F30;
            border-left: 4px solid var(--accent-primary);
            padding: 10px 15px;
            border-radius: 4px;
            font-size: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transform: translateX(120%);
            transition: transform 0.3s ease;
            z-index: 30;
        }
        .notification-toast.visible { transform: translateX(0); }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        /* Visual Animations */
        .vis-icon-pulse {
            animation: iconPulse 2s infinite;
        }
        @keyframes iconPulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Pill Container for "Quiz Generated" */
        .quiz-pill-generated {
            background-color: #10B981; /* Green-500 */
            color: white;
            border-radius: 9999px;
            padding: 0.5rem 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            pointer-events: none;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            transition: all 0.3s ease;
        }
        
        /* Agent Result Card Styling */
        .agent-result-card {
            background: linear-gradient(145deg, rgba(30,30,46,0.9), rgba(20,20,30,0.95));
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px; /* Rounded edges */
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
        }
        .agent-result-card:hover {
            transform: translateY(-2px);
            border-color: var(--accent-primary);
        }
        
        /* Smooth Fade In Up Animation */
        @keyframes fadeInUpSmooth {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up-smooth {
            animation: fadeInUpSmooth 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
    </style>
</head>
<body class="antialiased selection:bg-accent-primary selection:text-white">

    <canvas id="hero-canvas"></canvas>

    <nav class="nav-glass fixed w-full z-50" id="navbar">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="#" class="flex items-center group">
                <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png" class="h-10 w-auto object-contain group-hover:scale-105 transition-transform drop-shadow-[0_0_10px_rgba(230,57,127,0.5)]" alt="Logo">
            </a>
            
            <div class="hidden md:flex items-center gap-8 text-sm font-medium text-gray-300">
                <a href="#forge" class="hover:text-white transition-colors">Agent Forge</a>
                <a href="#quiz-demo" class="hover:text-white transition-colors">Study Engine</a>
                <a href="#collab-demo" class="hover:text-white transition-colors">Collab</a>
            </div>
            <div class="flex items-center gap-4">
                <a href="https://reputifly.org/note" class="text-sm text-gray-300 hover:text-white transition-colors hidden sm:block">Login</a>
                <a href="https://reputifly.org/note" class="btn-primary px-6 py-2.5 rounded-lg text-sm font-bold shadow-lg shadow-accent-primary/20">Get Started</a>
            </div>
        </div>
    </nav>

    <main>
        <section class="relative pt-48 pb-32 px-6 min-h-screen flex flex-col items-center justify-center text-center z-10">
            <div class="inline-flex items-center gap-3 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md mb-8 animate-bounce shadow-lg shadow-green-500/10">
                <span class="relative flex h-3 w-3">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
                </span>
                <span class="text-xs font-bold tracking-widest text-green-400 uppercase">Offline PWA Enabled</span>
            </div>

            <h1 class="text-6xl md:text-8xl font-black leading-tight mb-8 max-w-5xl mx-auto">
                <span class="text-white">Your Digital Mind.</span><br>
                <span class="dynamic-gradient-text">Fully Interconnected.</span>
            </h1>

            <p class="text-xl text-gray-400 max-w-2xl mx-auto mb-12 leading-relaxed">
                Reputifly is the <strong>free</strong>, AI-first workspace. Build custom Agents, generate quizzes from notes instantly, and collaborate in real-time.
            </p>

            <div class="flex flex-col sm:flex-row gap-5 w-full justify-center">
                <a href="https://reputifly.org/note" class="btn-primary px-10 py-5 rounded-xl text-xl font-bold shadow-2xl hover:scale-105 transition-transform flex items-center justify-center gap-3">
                    <span>Launch Workspace</span>
                    <i data-feather="zap" class="w-5 h-5"></i>
                </a>
                <a href="#forge" class="px-10 py-5 rounded-xl bg-white/5 hover:bg-white/10 border border-white/10 backdrop-blur-md transition-all text-xl font-medium flex items-center justify-center gap-3 group">
                    <i data-feather="play-circle" class="w-5 h-5 text-orange-400 group-hover:scale-110 transition-transform"></i>
                    <span>See Demos</span>
                </a>
            </div>
        </section>

        <section id="forge" class="py-24 px-6 relative">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-5xl font-bold mb-6">The <span class="dynamic-gradient-text">Agent Forge</span></h2>
                    <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                        Don't just chat. Build workflows. Select a persona below to see a live simulation.
                    </p>
                </div>

                <div class="glass-panel rounded-2xl border border-white/10 overflow-hidden shadow-2xl flex flex-col md:flex-row min-h-[600px]">
                    <div class="w-full md:w-1/3 bg-black/20 border-b md:border-b-0 md:border-r border-white/10 p-6 flex flex-col gap-4">
                        <h3 class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-2">Select Persona</h3>
                        
                        <button onclick="setForgeMode('business')" id="tab-business" class="forge-tab active text-left p-4 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-all group">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="p-2 rounded-lg bg-blue-500/20 text-blue-400"><i data-feather="briefcase" class="w-5 h-5"></i></div>
                                <span class="font-bold text-white">Business Analyst</span>
                            </div>
                            <p class="text-xs text-gray-400 group-hover:text-gray-300">Scrapes web, researches keywords, drafts high-ranking SEO blogs.</p>
                        </button>

                        <button onclick="setForgeMode('student')" id="tab-student" class="forge-tab text-left p-4 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-all group">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="p-2 rounded-lg bg-pink-500/20 text-pink-400"><i data-feather="book-open" class="w-5 h-5"></i></div>
                                <span class="font-bold text-white">Student / Researcher</span>
                            </div>
                            <p class="text-xs text-gray-400 group-hover:text-gray-300">Synthesizes lectures, creates study guides, generates interactive quizzes.</p>
                        </button>
                        
                        <div class="mt-auto pt-6 border-t border-white/10">
                            <button onclick="startForgeDemo(true)" id="run-sim-btn" class="w-full btn-primary py-3 rounded-lg font-bold flex items-center justify-center gap-2 transition-opacity">
                                <i data-feather="play" class="w-4 h-4"></i> Run Agent
                            </button>
                        </div>
                    </div>

                    <div class="w-full md:w-2/3 bg-[#0F0E18] relative flex flex-col">
                        <div class="h-14 border-b border-white/5 flex items-center justify-between px-6 bg-black/20">
                            <div class="flex gap-2">
                                <div class="w-3 h-3 rounded-full bg-red-500/50"></div>
                                <div class="w-3 h-3 rounded-full bg-yellow-500/50"></div>
                                <div class="w-3 h-3 rounded-full bg-green-500/50"></div>
                            </div>
                            <div class="text-xs font-mono text-gray-500" id="forge-header-status">AGENT_IDLE</div>
                        </div>

                        <div class="flex-grow p-8 flex flex-col gap-6 relative overflow-hidden">
                            <div id="forge-console" class="font-mono text-sm space-y-2 text-gray-400 h-2/3 overflow-y-auto custom-scrollbar p-4 rounded-lg bg-black/30 border border-white/5 shadow-inner">
                                <div class="text-gray-600 italic">// System Ready. Waiting for auto-run (2s)...</div>
                            </div>

                            <div id="forge-preview" class="h-1/3 border-t border-white/10 bg-white/5 p-6 relative transition-all duration-500 flex items-center justify-center overflow-hidden rounded-b-xl">
                                <div class="text-center text-gray-500" id="preview-placeholder">
                                    <i data-feather="cpu" class="w-8 h-8 mx-auto mb-2 opacity-50"></i>
                                    <p class="text-xs">Agent Output will appear here...</p>
                                </div>
                                <div id="processing-vis" class="hidden absolute inset-0 bg-black/50 flex flex-col items-center justify-center gap-4 backdrop-blur-sm rounded-b-xl">
                                    <div class="flex gap-6">
                                        <div id="vis-icon-web" class="w-16 h-16 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center hidden border border-blue-500/30"><i data-feather="globe" class="w-8 h-8 vis-icon-pulse"></i></div>
                                        <div id="vis-icon-brain" class="w-16 h-16 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center hidden border border-purple-500/30"><i data-feather="cpu" class="w-8 h-8 vis-icon-pulse"></i></div>
                                        <div id="vis-icon-write" class="w-16 h-16 rounded-full bg-green-500/20 text-green-400 flex items-center justify-center hidden border border-green-500/30"><i data-feather="edit-3" class="w-8 h-8 vis-icon-pulse"></i></div>
                                    </div>
                                    <span class="text-xs font-mono text-accent-primary animate-pulse tracking-widest" id="process-text">INITIALIZING...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="command-demo" class="py-24 px-6 bg-black/30 border-y border-white/5">
            <div class="max-w-5xl mx-auto text-center">
                <h2 class="text-4xl font-bold mb-4"><span class="dynamic-gradient-text">Just Type "/"</span></h2>
                <p class="text-gray-400 mb-12">Use the smart command bar to trigger AI actions instantly without leaving your keyboard.</p>
                
                <div class="glass-panel rounded-xl p-6 relative shadow-2xl min-h-[350px] text-left overflow-hidden flex flex-col">
                    <div class="h-8 border-b border-white/10 mb-4 flex items-center gap-2">
                         <div class="w-3 h-3 rounded-full bg-red-500/50"></div>
                         <span class="text-xs text-gray-500 ml-2">New Note</span>
                    </div>
                    
                    <div id="cmd-editor-area" class="font-mono text-gray-300 text-sm leading-relaxed relative flex-grow">
                        <span id="cmd-text-content"></span><span class="demo-cursor" id="cmd-cursor"></span>
                        
                        <div id="cmd-inserted-content" class="hidden mt-4 p-4 bg-white/5 rounded-lg border border-white/10 animate-fade-in-up-smooth transition-all duration-500">
                            <div class="flex gap-2 mb-2">
                                <span class="text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold">AI Research Brief</span>
                            </div>
                            <h4 class="font-bold text-white mb-2">Topic: Quantum Computing</h4>
                            <p class="text-xs text-gray-400 leading-relaxed">Quantum computing utilizes qubits to perform calculations exponentially faster than classical bits. Key players include IBM, Google, and Rigetti. The main applications are cryptography, drug discovery, and complex system simulation.</p>
                        </div>
                    </div>

                    <div id="cmd-menu" class="absolute top-[100px] left-10 bg-[#1E1E2E] border border-white/10 rounded-lg shadow-2xl w-64 overflow-hidden opacity-0 transition-all duration-200 transform scale-95 pointer-events-none z-20">
                        <div class="px-3 py-2 text-xs font-bold text-gray-500 uppercase bg-black/20">AI Commands</div>
                        <div class="px-4 py-2 hover:bg-accent-primary/20 cursor-pointer text-sm text-white flex items-center gap-2">
                            <i data-feather="edit-3" class="w-4 h-4 text-blue-400"></i> Summarize
                        </div>
                        <div class="px-4 py-2 bg-accent-primary/20 cursor-pointer text-sm text-white flex items-center gap-2 border-l-2 border-accent-primary">
                            <i data-feather="globe" class="w-4 h-4 text-green-400"></i> /research
                        </div>
                        <div class="px-4 py-2 hover:bg-accent-primary/20 cursor-pointer text-sm text-white flex items-center gap-2">
                            <i data-feather="image" class="w-4 h-4 text-yellow-400"></i> Generate Image
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="quiz-demo" class="py-24 px-6 relative overflow-hidden">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-4xl font-bold mb-4"><span class="dynamic-gradient-text">Instant Knowledge</span> Engine</h2>
                    <p class="text-gray-400">Turn any note into an interactive study session. Watch the AI explain its reasoning.</p>
                </div>

                <div class="glass-panel rounded-2xl border border-white/10 overflow-hidden shadow-2xl grid md:grid-cols-2 min-h-[550px] relative">
                    
                    <div class="p-8 border-b md:border-b-0 md:border-r border-white/10 bg-[#0F0E18] flex flex-col">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-white">Biology: Photosynthesis</h3>
                            <button id="btn-generate-quiz" class="text-xs text-white px-4 py-2 rounded-full font-bold bg-accent-primary transition-all duration-300 flex items-center gap-2 pointer-events-none shadow-lg">
                                <i data-feather="zap" class="w-3 h-3"></i> Generate Quiz
                            </button>
                        </div>
                        <div class="prose prose-invert prose-sm text-gray-400 flex-grow">
                            <p class="mb-4">Photosynthesis is the process used by plants, algae and certain bacteria to harness energy from sunlight and turn it into chemical energy.</p>
                            <p class="mb-4">The general equation for photosynthesis is: <strong>6CO2 + 6H2O + Light Energy â†’ C6H12O6 (sugar) + 6O2 (oxygen).</strong></p>
                            <p class="mb-4">It occurs primarily in the <strong>chloroplasts</strong> using the green pigment <strong>chlorophyll</strong>.</p>
                            <ul class="list-disc pl-4 space-y-1">
                                <li>Inputs: Carbon Dioxide, Water, Light</li>
                                <li>Outputs: Glucose, Oxygen</li>
                            </ul>
                        </div>
                    </div>

                    <div class="p-8 bg-black/30 flex flex-col items-center justify-start relative" id="quiz-output-area">
                        <div class="text-center text-gray-500 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-opacity duration-300" id="quiz-placeholder">
                            <i data-feather="book-open" class="w-12 h-12 mx-auto mb-3 opacity-50"></i>
                            <p>Waiting for generation...</p>
                        </div>

                        <div id="quiz-container" class="w-full max-w-md space-y-6 opacity-0 transition-opacity duration-500 mt-4">
                            <div class="bg-[#1E1E2E] border border-white/10 rounded-xl p-6 shadow-xl transform transition-all duration-300" id="q1">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-xs font-bold text-accent-secondary uppercase tracking-wider">Question 1 of 5</span>
                                </div>
                                <h4 class="text-white font-bold text-lg mb-6 leading-snug">Where does photosynthesis primarily occur?</h4>
                                <div class="space-y-3">
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q1a">A) Mitochondria</div>
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q1b">B) Nucleus</div>
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q1c">C) Chloroplasts</div>
                                </div>
                                <div class="reasoning mt-4 text-xs text-green-400 hidden p-3 bg-green-500/10 rounded-lg border border-green-500/20 flex gap-2 items-start" id="r1">
                                    <i data-feather="check-circle" class="w-4 h-4 flex-shrink-0 mt-0.5"></i>
                                    <div><strong>Correct!</strong> The source note states it occurs primarily in the chloroplasts using chlorophyll.</div>
                                </div>
                            </div>
                            
                             <div class="bg-[#1E1E2E] border border-white/10 rounded-xl p-6 shadow-xl transform transition-all duration-300 hidden" id="q2">
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-xs font-bold text-accent-secondary uppercase tracking-wider">Question 2 of 5</span>
                                </div>
                                <h4 class="text-white font-bold text-lg mb-6 leading-snug">Which of these is an OUTPUT of the process?</h4>
                                <div class="space-y-3">
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q2a">A) Carbon Dioxide</div>
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q2b">B) Oxygen</div>
                                    <div class="quiz-option border border-white/10 rounded-lg p-3 text-sm text-gray-300" id="q2c">C) Water</div>
                                </div>
                                <div class="reasoning mt-4 text-xs text-red-400 hidden p-3 bg-red-500/10 rounded-lg border border-red-500/20 flex gap-2 items-start" id="r2">
                                    <i data-feather="x-circle" class="w-4 h-4 flex-shrink-0 mt-0.5"></i>
                                    <div><strong>Incorrect.</strong> CO2 is an input. Oxygen is a primary output.</div>
                                </div>
                            </div>
                        </div>

                        <div id="cursor-quiz" class="mouse-pointer" style="top: 10px; left: 10px; opacity: 0;" data-label="AI Agent"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="collab-demo" class="py-24 px-6 relative overflow-hidden bg-black/20 border-y border-white/5">
            <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-16 items-start">
                
                <div>
                    <h2 class="text-3xl font-bold mb-4">Real-Time <span class="dynamic-gradient-text">Collaboration</span></h2>
                    <p class="text-gray-400 mb-8">Invite your team via email. Watch cursors fly. Collaborate live.</p>
                    
                    <div class="relative h-[450px] w-full glass-panel rounded-2xl border border-white/10 bg-bg-main overflow-hidden group">
                        <div class="h-12 bg-black/40 border-b border-white/5 flex items-center px-6 justify-between">
                            <span class="text-sm font-bold text-white">Project_Launch.note</span>
                            <div class="flex items-center gap-3">
                                <div class="flex -space-x-2" id="avatar-stack">
                                    <div class="w-8 h-8 rounded-full bg-blue-500 border-2 border-[#1E1E2E] flex items-center justify-center text-xs font-bold text-white">Me</div>
                                </div>
                                <button id="share-btn-demo" class="bg-accent-primary text-white px-3 py-1.5 rounded text-xs font-bold shadow-lg hover:bg-accent-primary/80 transition-colors">Share</button>
                            </div>
                        </div>

                        <div class="p-8 relative h-full">
                            <h1 class="text-2xl font-bold text-white mb-4">Launch Plan</h1>
                            <div class="space-y-2 text-gray-300 text-sm" id="collab-text-area">
                                <p>1. Finalize UI assets.</p>
                                <p>2. Deploy backend API.</p>
                                <p id="collab-typing-line">3. </p>
                            </div>
                            <div id="cursor-me" class="mouse-pointer" style="top: 50px; left: 350px; opacity: 0;" data-label="You"></div>
                            <div id="cursor-bob" class="mouse-pointer" style="top: 200px; left: 100px; opacity: 0;" data-label="Bob"></div>
                        </div>

                        <div id="share-modal-demo" class="demo-modal">
                            <h3 class="text-lg font-bold text-white mb-2">Share Note</h3>
                            <p class="text-sm text-gray-400 mb-4">Invite via email.</p>
                            <div class="flex gap-2">
                                <input type="text" id="share-email-input" value="" class="flex-grow bg-black/30 border border-white/10 rounded p-2 text-sm text-white placeholder-gray-600" placeholder="email...">
                                <button class="bg-white text-black px-4 py-2 rounded text-sm font-bold" id="share-invite-btn">Invite</button>
                            </div>
                        </div>

                        <div id="collab-notif" class="notification-toast text-white">
                            <span class="font-bold text-accent-secondary">Bob</span> joined the document.
                        </div>
                    </div>
                </div>

                <div>
                    <h2 class="text-3xl font-bold mb-4">Shareable <span class="dynamic-gradient-text">Notes</span></h2>
                    <p class="text-gray-400 mb-8">Generate secure links. Let clients or teams tick off tasks without logging in.</p>

                    <div class="glass-panel rounded-xl p-6 relative min-h-[450px] flex flex-col">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="font-bold text-xl text-white">Q3 Goals</h3>
                            <button id="checklist-share-trigger" class="text-xs text-accent-secondary border border-accent-secondary/30 px-3 py-1 rounded hover:bg-accent-secondary/10 transition-colors">
                                <i data-feather="link" class="inline w-3 h-3 mr-1"></i> Share Link
                            </button>
                        </div>
                        
                        <div class="space-y-3 flex-grow" id="checklist-items">
                            <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/5 transition-all" id="item-1">
                                <div class="w-5 h-5 rounded border border-gray-500 flex items-center justify-center cursor-pointer"></div>
                                <span class="text-gray-300">Hire Frontend Dev</span>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/5 transition-all" id="item-2">
                                <div class="w-5 h-5 rounded border border-gray-500 flex items-center justify-center cursor-pointer"></div>
                                <span class="text-gray-300">Finalize Budget</span>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/5 transition-all" id="item-3">
                                <div class="w-5 h-5 rounded border border-gray-500 flex items-center justify-center cursor-pointer"></div>
                                <span class="text-gray-300">Launch Beta</span>
                            </div>
                        </div>

                        <div id="link-modal-checklist" class="demo-modal text-center">
                            <h3 class="text-lg font-bold text-white mb-2">Public Link Created</h3>
                            <div class="bg-black/30 p-2 rounded text-xs text-gray-400 mb-3 truncate">reputifly.org/shared/x8z9...</div>
                            <button class="w-full bg-accent-primary text-white py-2 rounded text-sm font-bold">Copy Link</button>
                        </div>

                        <div id="cursor-check" class="mouse-pointer" style="top: 120%; left: 120%;" data-label="External User"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-32 px-6 relative overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-t from-[#0B0A14] via-[#0B0A14]/90 to-transparent z-10"></div>
            <div class="absolute inset-0 opacity-30 z-0" style="background-image: url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80'); background-size: cover; background-position: center;"></div>

            <div class="max-w-4xl mx-auto relative z-20 text-center">
                <div class="inline-flex items-center justify-center p-4 bg-white/10 backdrop-blur-xl rounded-full mb-8 border border-white/20 shadow-2xl">
                    <i data-feather="wifi-off" class="w-8 h-8 text-gray-200"></i>
                </div>
                <h2 class="text-5xl font-bold mb-6 text-white">No Internet? <span class="dynamic-gradient-text">No Problem.</span></h2>
                <p class="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                    Reputifly is built as a Progressive Web App (PWA). Work from a plane at 30,000ft or deep in the mountains. Your brain doesn't need signal.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-left">
                    <div class="glass-panel p-6 rounded-xl border border-white/10 bg-black/50">
                        <i data-feather="download-cloud" class="w-6 h-6 text-green-400 mb-3"></i>
                        <h4 class="font-bold text-white">Installable</h4>
                        <p class="text-sm text-gray-400">Install directly to your dock or home screen. No app store needed.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl border border-white/10 bg-black/50">
                        <i data-feather="database" class="w-6 h-6 text-blue-400 mb-3"></i>
                        <h4 class="font-bold text-white">Local First</h4>
                        <p class="text-sm text-gray-400">Changes save instantly to your device and sync when you reconnect.</p>
                    </div>
                    <div class="glass-panel p-6 rounded-xl border border-white/10 bg-black/50">
                        <i data-feather="zap" class="w-6 h-6 text-yellow-400 mb-3"></i>
                        <h4 class="font-bold text-white">Zero Latency</h4>
                        <p class="text-sm text-gray-400">Experience instant load times, regardless of network speed.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pricing" class="py-32 px-6 text-center">
            <div class="max-w-3xl mx-auto">
                <h2 class="text-4xl font-bold mb-8">Powerful Features. <span class="dynamic-gradient-text">Zero Cost.</span></h2>
                <div class="glass-panel p-8 rounded-3xl max-w-md mx-auto border border-accent-primary/30 relative overflow-hidden hover:scale-105 transition-transform duration-500 cursor-pointer group">
                    <div class="absolute -top-10 -right-10 w-32 h-32 bg-accent-primary/20 blur-3xl rounded-full group-hover:bg-accent-primary/40 transition-colors"></div>
                    <h3 class="text-2xl font-bold text-white mb-2">Early Adopter</h3>
                    <div class="text-5xl font-bold text-white mb-6 flex justify-center items-baseline gap-2">
                        $0 <span class="text-sm font-normal text-gray-500">/ forever</span>
                    </div>
                    <ul class="text-left space-y-4 mb-8 text-gray-300">
                        <li class="flex gap-3"><i data-feather="check" class="text-accent-primary w-5 h-5"></i> Unlimited Notes & Folders</li>
                        <li class="flex gap-3"><i data-feather="check" class="text-accent-primary w-5 h-5"></i> Agent Forge Access</li>
                        <li class="flex gap-3"><i data-feather="check" class="text-accent-primary w-5 h-5"></i> Real-time Collaboration</li>
                        <li class="flex gap-3"><i data-feather="check" class="text-accent-primary w-5 h-5"></i> Offline PWA</li>
                    </ul>
                    <a href="https://reputifly.org/note" class="block w-full btn-primary py-3 rounded-xl font-bold text-lg">Start Now</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-white/5 bg-black/40 py-12">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-2 opacity-50 hover:opacity-100 transition-opacity">
                <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png" class="h-8 w-auto object-contain invert brightness-0" alt="Logo">
            </div>
            <div class="text-xs text-gray-600">
                &copy; 2025 Reputifly. Free for everyone.
            </div>
        </div>
    </footer>

    <script>
        feather.replace();

        // --- 1. 3D Globe Logic ---
        const initGlobe = () => {
            const canvas = document.getElementById('hero-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);

            const group = new THREE.Group();
            scene.add(group);

            const geometry = new THREE.IcosahedronGeometry(1.8, 1);
            const wireframeMat = new THREE.MeshBasicMaterial({ color: 0x333344, wireframe: true, transparent: true, opacity: 0.08 });
            const sphere = new THREE.Mesh(geometry, wireframeMat);
            group.add(sphere);

            const particlesGeo = new THREE.BufferGeometry();
            const count = 200;
            const posArray = new Float32Array(count * 3);
            for(let i = 0; i < count * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 5; 
            }
            particlesGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMat = new THREE.PointsMaterial({ size: 0.03, color: 0xE6397F, transparent: true, opacity: 0.6 });
            const particles = new THREE.Points(particlesGeo, particlesMat);
            group.add(particles);

            camera.position.z = 5;

            let mouseX = 0;
            let mouseY = 0;
            document.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX - window.innerWidth / 2) * 0.0005;
                mouseY = (e.clientY - window.innerHeight / 2) * 0.0005;
            });

            const animate = () => {
                requestAnimationFrame(animate);
                group.rotation.y += 0.001;
                group.rotation.x += 0.0005;
                group.rotation.y += (mouseX - group.rotation.y) * 0.05;
                group.rotation.x += (mouseY - group.rotation.x) * 0.05;
                renderer.render(scene, camera);
            };
            animate();
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        // --- 2. Agent Forge Logic ---
        let currentMode = 'business';
        const consoleEl = document.getElementById('forge-console');
        const previewEl = document.getElementById('forge-preview');
        const statusEl = document.getElementById('forge-header-status');
        let autoRunTimeout;

        function setForgeMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.forge-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`tab-${mode}`).classList.add('active');
            consoleEl.innerHTML = '<div class="text-gray-600 italic">// System Ready. Mode: ' + mode.toUpperCase() + '</div>';
            previewEl.innerHTML = `<div class="text-center text-gray-500" id="preview-placeholder"><i data-feather="${mode === 'business' ? 'briefcase' : 'book'}" class="w-12 h-12 mx-auto mb-3 opacity-50"></i><p>Click Run to start ${mode} agent...</p></div>`;
            feather.replace();
        }

        function startForgeDemo(manual = false) {
            clearTimeout(autoRunTimeout);
            runActiveSimulation();
        }

        async function runActiveSimulation() {
            const btn = document.getElementById('run-sim-btn');
            const processingVis = document.getElementById('processing-vis');
            const processText = document.getElementById('process-text');
            const placeholder = document.getElementById('preview-placeholder');
            const icons = {
                web: document.getElementById('vis-icon-web'),
                brain: document.getElementById('vis-icon-brain'),
                write: document.getElementById('vis-icon-write')
            };

            if(btn.disabled) return;
            btn.disabled = true;
            btn.classList.add('opacity-50');
            statusEl.textContent = 'AGENT_RUNNING';
            statusEl.classList.add('text-accent-secondary', 'animate-pulse');
            
            consoleEl.innerHTML = '';
            placeholder.classList.add('hidden');
            processingVis.classList.remove('hidden');

            const scenarios = {
                business: [
                    { text: "Connecting to Search API...", action: "SCANNING WEB", icon: 'web' },
                    { text: "Scraping 'Competitor Pricing'...", action: "PARSING DATA", icon: 'web' },
                    { text: "Identifying Keywords...", action: "ANALYZING", icon: 'brain' },
                    { text: "Drafting SEO Report...", action: "WRITING", icon: 'write' },
                    { text: "Complete.", action: "FINISHING", icon: 'write' }
                ],
                // UPDATED STUDENT SCENARIO TO BE SMARTER
                student: [
                    { text: "Scanning 'Lecture_4.pdf'...", action: "READING", icon: 'web' },
                    { text: "Extracting Key Concepts (Neuroscience)...", action: "EXTRACTING", icon: 'brain' },
                    { text: "Cross-referencing Wiki...", action: "VERIFYING", icon: 'web' },
                    { text: "Generating Active Recall Questions...", action: "THINKING", icon: 'brain' },
                    { text: "Study Guide Generated.", action: "READY", icon: 'write' }
                ]
            };

            const steps = scenarios[currentMode];
            for (let step of steps) {
                processText.innerText = step.action;
                // Hide all icons then show relevant one
                Object.values(icons).forEach(i => i.classList.add('hidden'));
                if(icons[step.icon]) icons[step.icon].classList.remove('hidden');

                await new Promise(r => setTimeout(r, 1000));
                const line = document.createElement('div');
                line.className = 'console-line text-green-400';
                line.innerHTML = `> ${step.text}`;
                consoleEl.appendChild(line);
                consoleEl.scrollTop = consoleEl.scrollHeight;
            }

            processingVis.classList.add('hidden');
            Object.values(icons).forEach(i => i.classList.add('hidden'));

            if (currentMode === 'business') {
                previewEl.innerHTML = `
                    <div class="w-full h-full bg-white text-black p-6 rounded-lg overflow-y-auto text-left font-sans animate-fade-in-up-smooth agent-result-card">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-bold text-white">Strategy Report</h2>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold">FINAL DRAFT</span>
                        </div>
                        <p class="text-sm text-gray-300 mb-4">Based on competitive analysis...</p>
                        <div class="space-y-2">
                            <div class="h-2 bg-gray-600 rounded w-3/4"></div>
                            <div class="h-2 bg-gray-600 rounded w-full"></div>
                            <div class="h-2 bg-gray-600 rounded w-5/6"></div>
                        </div>
                        <button class="w-full bg-accent-primary text-white py-2 rounded mt-6 text-sm font-bold hover:opacity-90 transition-opacity">Export PDF</button>
                    </div>`;
            } else {
                // UPDATED BETTER STUDENT EXAMPLE
                previewEl.innerHTML = `
                    <div class="w-full h-full flex flex-col animate-fade-in-up-smooth">
                         <div class="w-full bg-[#1E1E2E] border border-pink-500/30 p-5 rounded-lg shadow-xl flex-grow flex flex-col relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-16 h-16 bg-pink-500/10 rounded-bl-full"></div>
                            <div class="flex justify-between items-center mb-3 relative z-10">
                                 <h2 class="text-sm font-bold text-white flex items-center gap-2"><i data-feather="book" class="w-4 h-4 text-pink-400"></i> Lecture 4: Neuroscience</h2>
                                 <span class="bg-pink-500/20 text-pink-300 text-[10px] uppercase font-bold px-2 py-1 rounded-full">Summary</span>
                            </div>
                            <p class="text-xs text-gray-400 leading-relaxed mb-3">
                                <span class="text-white font-bold">Key Concept:</span> Action potentials are rapid, transient changes in membrane potential. Phase 1: Depolarization (Na+ influx). Phase 2: Repolarization (K+ efflux).
                            </p>
                            <div class="flex gap-2 flex-wrap mb-auto">
                                <span class="text-[10px] bg-white/5 border border-white/10 px-2 py-1 rounded text-gray-300">#Threshold</span>
                                <span class="text-[10px] bg-white/5 border border-white/10 px-2 py-1 rounded text-gray-300">#Synapse</span>
                            </div>
                            <div class="mt-3 p-2 bg-green-500/10 border border-green-500/20 rounded flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                     <i data-feather="layers" class="text-green-400 w-3 h-3"></i>
                                     <span class="text-green-100 text-xs font-bold">15 Flashcards Ready</span>
                                </div>
                                <button class="text-[10px] bg-green-600 text-white px-2 py-1 rounded font-bold hover:bg-green-500 transition-colors">Review</button>
                            </div>
                        </div>
                    </div>`;
            }
            feather.replace();

            statusEl.textContent = 'AGENT_IDLE';
            statusEl.classList.remove('text-accent-secondary', 'animate-pulse');
            btn.disabled = false;
            btn.classList.remove('opacity-50');
        }

        // --- 3. Command Bar Auto-Typing ---
        const runCommandDemo = () => {
            const textEl = document.getElementById('cmd-text-content');
            const menu = document.getElementById('cmd-menu');
            const inserted = document.getElementById('cmd-inserted-content');
            const fullText = "Drafting a new plan for ";
            let i = 0;
            
            function typeLoop() {
                if(i < fullText.length) {
                    textEl.textContent += fullText.charAt(i);
                    i++;
                    setTimeout(typeLoop, 100);
                } else {
                    setTimeout(() => {
                        textEl.textContent += "/";
                        setTimeout(() => {
                            menu.classList.remove('opacity-0', 'scale-95');
                            setTimeout(() => {
                                textEl.textContent += "re";
                                setTimeout(() => {
                                    menu.classList.add('opacity-0', 'scale-95');
                                    textEl.innerHTML = "Drafting a new plan for <span class='text-accent-primary'>Running Research Agent...</span>";
                                    // Keep the inserted content visible to show it was "added"
                                    setTimeout(() => {
                                        inserted.classList.remove('hidden');
                                        inserted.classList.add('animate-fade-in-up-smooth');
                                        setTimeout(() => {
                                            // Reset loop
                                            inserted.classList.add('hidden');
                                            inserted.classList.remove('animate-fade-in-up-smooth');
                                            textEl.textContent = "";
                                            i = 0;
                                            setTimeout(typeLoop, 2000);
                                        }, 5000);
                                    }, 800);
                                }, 600);
                            }, 500);
                        }, 400);
                    }, 500);
                }
            }
            typeLoop();
        };

        // --- 4. Note-to-Quiz Live Demo (2 Questions) ---
        const runQuizDemo = () => {
            const cursor = document.getElementById('cursor-quiz');
            const btn = document.getElementById('btn-generate-quiz');
            const placeholder = document.getElementById('quiz-placeholder');
            const container = document.getElementById('quiz-container');
            const q1 = document.getElementById('q1');
            const q2 = document.getElementById('q2');
            
            const loop = async () => {
                // Reset State
                cursor.style.opacity = 0;
                cursor.style.top = "10px"; cursor.style.left = "10px";
                placeholder.classList.remove('hidden');
                container.classList.add('opacity-0');
                q1.classList.remove('hidden');
                q2.classList.add('hidden');
                
                // Clear Styles
                document.querySelectorAll('.quiz-option').forEach(el => {
                    el.classList.remove('correct', 'wrong');
                });
                document.querySelectorAll('.reasoning').forEach(el => el.classList.add('hidden'));

                btn.innerHTML = '<i data-feather="zap" class="w-3 h-3"></i> Generate Quiz';
                btn.classList.remove('quiz-pill-generated', 'bg-accent-primary'); // Reset classes
                btn.classList.add('bg-accent-primary', 'rounded-lg', 'px-4'); // Set initial style
                feather.replace();

                await new Promise(r => setTimeout(r, 1000));

                // 1. Move Cursor to Button
                cursor.style.transition = "all 1s ease-in-out";
                cursor.style.opacity = 1;
                cursor.style.top = btn.offsetTop + 15 + "px";
                cursor.style.left = btn.offsetLeft + 50 + "px";

                await new Promise(r => setTimeout(r, 1000));

                // 2. Click Button
                cursor.classList.add('clicking');
                btn.innerHTML = '<i data-feather="loader" class="w-3 h-3 animate-spin"></i> Generating Quiz...';
                await new Promise(r => setTimeout(r, 300));
                cursor.classList.remove('clicking');

                await new Promise(r => setTimeout(r, 1500)); // Simulate AI time
                
                // 3. Show Question 1 & Change Button to Pill
                placeholder.classList.add('hidden');
                container.classList.remove('opacity-0');
                
                // Pill Transformation
                btn.innerHTML = '<i data-feather="check-circle" class="w-3 h-3"></i> Quiz Generated';
                btn.classList.remove('bg-accent-primary', 'rounded-lg', 'px-4');
                btn.classList.add('quiz-pill-generated'); // Make it a green pill
                feather.replace();

                await new Promise(r => setTimeout(r, 1000));

                // 4. Move Cursor to Answer C (Correct)
                const optC = document.getElementById('q1c');
                cursor.style.top = (container.offsetTop + optC.offsetTop + 15) + "px";
                cursor.style.left = (container.offsetLeft + optC.offsetLeft + 50) + "px";

                await new Promise(r => setTimeout(r, 1000));

                // 5. Click Answer C
                cursor.classList.add('clicking');
                optC.classList.add('correct');
                document.getElementById('r1').classList.remove('hidden');
                await new Promise(r => setTimeout(r, 300));
                cursor.classList.remove('clicking');

                await new Promise(r => setTimeout(r, 1500));

                // 6. Transition to Question 2
                q1.classList.add('hidden');
                q2.classList.remove('hidden');

                // 7. Move Cursor to Answer A (Wrong)
                const opt2A = document.getElementById('q2a');
                cursor.style.top = (container.offsetTop + opt2A.offsetTop + 15) + "px";
                cursor.style.left = (container.offsetLeft + opt2A.offsetLeft + 50) + "px";

                await new Promise(r => setTimeout(r, 1000));

                // 8. Click Answer A
                cursor.classList.add('clicking');
                opt2A.classList.add('wrong'); // Show red
                document.getElementById('r2').classList.remove('hidden');
                await new Promise(r => setTimeout(r, 300));
                cursor.classList.remove('clicking');

                // Loop restarts
                setTimeout(loop, 4000);
            };
            loop();
        };

        // --- 5. Collab & Checklist Demos ---
        const runCollabDemo = () => {
            const cursorMe = document.getElementById('cursor-me');
            const cursorBob = document.getElementById('cursor-bob');
            const modal = document.getElementById('share-modal-demo');
            const input = document.getElementById('share-email-input');
            const notif = document.getElementById('collab-notif');
            const textArea = document.getElementById('collab-text-area');
            const avatarStack = document.getElementById('avatar-stack');

            const loop = async () => {
                // Reset
                cursorMe.style.top = "200px"; cursorMe.style.left = "100px"; cursorMe.style.opacity = 1;
                cursorBob.style.opacity = 0;
                textArea.lastElementChild?.remove(); 
                
                await new Promise(r => setTimeout(r, 1000));

                // 1. Move to Share
                cursorMe.style.transition = "all 1s ease-in-out";
                cursorMe.style.top = "30px"; cursorMe.style.left = "85%";
                await new Promise(r => setTimeout(r, 1000));
                
                // 2. Click Share
                cursorMe.classList.add('clicking');
                modal.classList.add('visible');
                await new Promise(r => setTimeout(r, 300));
                cursorMe.classList.remove('clicking');

                // 3. Type Email
                input.value = "";
                let email = "bob@work.com";
                for(let char of email) {
                    input.value += char;
                    await new Promise(r => setTimeout(r, 50));
                }
                
                // 4. Invite
                cursorMe.style.top = "130px"; cursorMe.style.left = "85%";
                await new Promise(r => setTimeout(r, 500));
                cursorMe.classList.add('clicking');
                modal.classList.remove('visible');
                await new Promise(r => setTimeout(r, 300));
                cursorMe.classList.remove('clicking');
                
                // 5. Bob Joins
                notif.classList.add('visible');
                await new Promise(r => setTimeout(r, 1000));
                notif.classList.remove('visible');
                
                cursorBob.style.opacity = 1;
                
                // 6. Bob Types
                cursorMe.style.top = "100px"; cursorMe.style.left = "50px";
                cursorBob.style.transition = "all 1s ease-in-out";
                cursorBob.style.top = "180px"; cursorBob.style.left = "50px";
                
                await new Promise(r => setTimeout(r, 1000));
                
                const p = document.createElement('p');
                p.className = "text-purple-400";
                p.innerText = "3. Integrate Stripe.";
                textArea.appendChild(p);
                
                setTimeout(loop, 3000);
            };
            loop();
        };

        const runChecklistDemo = () => {
            const cursor = document.getElementById('cursor-check');
            const shareBtn = document.getElementById('checklist-share-trigger');
            const modal = document.getElementById('link-modal-checklist');
            const item2 = document.getElementById('item-2');

            const loop = async () => {
                // Reset
                cursor.style.opacity = 1; 
                cursor.dataset.label = "You";
                cursor.style.top = "50px"; cursor.style.left = "50px";
                item2.querySelector('div').innerHTML = '';
                item2.classList.remove('opacity-50');

                await new Promise(r => setTimeout(r, 1000));

                // 1. Click Share Link
                cursor.style.transition = "all 1s ease-in-out";
                cursor.style.top = shareBtn.offsetTop + 15 + "px";
                cursor.style.left = shareBtn.offsetLeft + 50 + "px";
                await new Promise(r => setTimeout(r, 1000));
                
                cursor.classList.add('clicking');
                modal.classList.add('visible');
                await new Promise(r => setTimeout(r, 300));
                cursor.classList.remove('clicking');
                
                await new Promise(r => setTimeout(r, 1000));
                
                // 2. Copy Link
                cursor.style.top = (modal.offsetTop + 80) + "px";
                cursor.style.left = (modal.offsetLeft + 100) + "px";
                await new Promise(r => setTimeout(r, 800));
                cursor.classList.add('clicking');
                modal.classList.remove('visible');
                cursor.classList.remove('clicking');

                // 3. External User View
                cursor.dataset.label = "External User";
                cursor.style.top = "120%"; cursor.style.left = "120%"; 
                await new Promise(r => setTimeout(r, 1000));
                
                // 4. Tick Item
                cursor.style.top = (item2.offsetTop + 20) + "px";
                cursor.style.left = (item2.offsetLeft + 20) + "px";
                await new Promise(r => setTimeout(r, 1000));
                
                cursor.classList.add('clicking');
                item2.querySelector('div').innerHTML = '<i data-feather="check" class="w-3 h-3 text-green-400"></i>';
                item2.classList.add('opacity-50');
                feather.replace();
                await new Promise(r => setTimeout(r, 300));
                cursor.classList.remove('clicking');
                
                setTimeout(loop, 3000);
            };
            loop();
        };

        // --- Init ---
        document.addEventListener('DOMContentLoaded', () => {
            initGlobe();
            runCommandDemo();
            runQuizDemo();
            runCollabDemo();
            runChecklistDemo();
            
            // Intersection Observer for Agent Forge Auto-Run
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) {
                        autoRunTimeout = setTimeout(() => startForgeDemo(), 2000);
                        observer.unobserve(entry.target);
                    }
                });
            });
            observer.observe(document.getElementById('forge'));

            // Smart Header Logic
            let lastScroll = 0;
            let scrollTimer;
            const nav = document.getElementById('navbar');
            
            window.addEventListener('scroll', () => {
                const currentScroll = window.scrollY;
                
                if (currentScroll > 50) nav.classList.add('scrolled');
                else nav.classList.remove('scrolled');

                if (currentScroll > lastScroll && currentScroll > 100) {
                    nav.classList.add('hidden-nav');
                } else {
                    nav.classList.remove('hidden-nav');
                }
                
                clearTimeout(scrollTimer);
                scrollTimer = setTimeout(() => {
                    nav.classList.remove('hidden-nav');
                }, 800);

                lastScroll = currentScroll;
            });
        });

    </script>
</body>
</html>
