<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Get Your Free Website Sample | Reputifly</title>
    <meta name="description"
        content="Claim your free, fully custom-designed website sample from Reputifly today. Professional quality, built around your business goals.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Get Your Free Website Sample">
    <meta property="og:description"
        content="Claim your free, fully custom-designed website sample from Reputifly today. Professional quality, built around your business goals.">
    <meta property="og:image"
        content="https://reputifly.com/wp-content/uploads/2026/02/ChatGPT-Image-Feb-22-2026-11_03_34-PM.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Get Your Free Website Sample">
    <meta name="twitter:description"
        content="Claim your free, fully custom-designed website sample from Reputifly today.">
    <meta name="twitter:image"
        content="https://reputifly.com/wp-content/uploads/2026/02/ChatGPT-Image-Feb-22-2026-11_03_34-PM.png">
    <link rel="icon" type="image/png"
        href="https://media.licdn.com/dms/image/v2/D560BAQEScnUkJITXAg/company-logo_200_200/B56ZajOckKHsAI-/0/1746495195792?e=2147483647&v=beta&t=Z7yQpp5jSwm-De46D45WIC5fY_2w0GVgEWLoEOM1aug">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
        }

        body {
            background: #0a0a10;
            background-image:
                radial-gradient(ellipse at 20% 0%, rgba(230, 57, 127, 0.06) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 100%, rgba(59, 130, 246, 0.04) 0%, transparent 60%);
            color: #F0F0F0;
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        h1,
        h2,
        h3 {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        .card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 20px;
            padding: 32px 24px;
            max-width: 480px;
            width: 100%;
            position: relative;
            overflow: visible;
        }

        /* Progress */
        .progress-bar {
            display: flex;
            gap: 5px;
            margin-bottom: 28px;
        }

        .progress-dot {
            flex: 1;
            height: 3px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.06);
            transition: background 0.4s;
        }

        .progress-dot.done {
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-dot.active {
            background: linear-gradient(135deg, #E6397F, #FF8A00);
        }

        .step-num {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 10px;
        }

        .step-title {
            font-size: 22px;
            margin-bottom: 4px;
            color: white;
        }

        .step-sub {
            color: #aaa;
            font-size: 14px;
            margin-bottom: 24px;
            line-height: 1.7;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeUp 0.25s ease;
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(6px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Inputs - 16px minimum to prevent iOS zoom */
        label.field-label {
            display: block;
            font-size: 12px;
            font-weight: 700;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: 6px;
        }

        input[type="text"],
        input[type="tel"],
        input[type="url"],
        textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            color: white;
            padding: 14px 16px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            transition: 0.2s;
            margin-bottom: 16px;
            -webkit-appearance: none;
            appearance: none;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: #E6397F;
            background: rgba(255, 255, 255, 0.06);
        }

        textarea {
            resize: none;
            min-height: 140px;
            line-height: 1.6;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.1) transparent;
        }

        textarea::-webkit-scrollbar {
            width: 5px;
        }

        textarea::-webkit-scrollbar-track {
            background: transparent;
        }

        textarea::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        textarea::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        input::placeholder,
        textarea::placeholder {
            color: #666;
        }

        /* Strength Meter */
        .strength-meter {
            margin-top: -8px;
            margin-bottom: 20px;
        }

        .strength-header {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            font-weight: 700;
            color: #888;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .strength-label {
            transition: color 0.3s;
        }

        .strength-bar-bg {
            height: 6px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .strength-bar-fill {
            height: 100%;
            width: 0%;
            background: transparent;
            border-radius: 6px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.4s ease, box-shadow 0.4s ease;
        }

        .strength-hint {
            font-size: 13px;
            color: #777;
            transition: color 0.3s;
            line-height: 1.4;
            display: block;
            margin-top: 6px;
        }

        /* Toggle Cards */
        .toggle-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .toggle-card {
            padding: 20px 12px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.02);
            border: 1.5px solid rgba(255, 255, 255, 0.06);
            transition: 0.2s;
        }

        .toggle-card:active {
            transform: scale(0.97);
        }

        .toggle-card.selected {
            border-color: #E6397F;
            background: rgba(230, 57, 127, 0.05);
        }

        .toggle-card .t-icon {
            font-size: 20px;
            color: #777;
            margin-bottom: 8px;
            transition: 0.2s;
        }

        .toggle-card.selected .t-icon {
            color: #E6397F;
        }

        .toggle-card .t-label {
            font-size: 13px;
            font-weight: 600;
            color: #ccc;
        }

        .toggle-card .t-desc {
            font-size: 11px;
            color: #555;
            margin-top: 3px;
        }

        /* Palette + Font Picker */
        .picker-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .picker-item {
            padding: 10px 6px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.02);
            border: 1.5px solid rgba(255, 255, 255, 0.05);
            transition: 0.2s;
            font-size: 11px;
            color: #999;
        }

        .picker-item:active {
            transform: scale(0.96);
        }

        .picker-item.selected {
            border-color: #E6397F;
            background: rgba(230, 57, 127, 0.05);
        }

        .picker-item .swatch-row {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin-bottom: 5px;
        }

        .picker-item .swatch {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .picker-item .font-demo {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 3px;
            line-height: 1;
            color: #ccc;
        }

        /* Upload */
        .upload-zone {
            border: 1.5px dashed rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            margin-bottom: 16px;
        }

        .upload-zone:active {
            transform: scale(0.98);
        }

        .upload-zone.has-file {
            border-color: #22c55e;
            border-style: solid;
            background: rgba(34, 197, 94, 0.04);
        }

        .upload-zone input {
            display: none;
        }

        .upload-zone p {
            color: #555;
            font-size: 12px;
        }

        .upload-zone .uz-icon {
            color: #444;
            font-size: 20px;
            margin-bottom: 6px;
        }

        .upload-preview {
            max-height: 40px;
            max-width: 80px;
            object-fit: contain;
            margin: 0 auto 6px;
            display: block;
            border-radius: 4px;
        }

        .filename {
            color: #22c55e;
            font-weight: 600;
            font-size: 11px;
        }

        /* Searchable Dropdown */
        .search-select {
            position: relative;
            margin-bottom: 16px;
        }

        .search-select input {
            margin-bottom: 0;
        }

        .search-select .dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 10;
            background: #0d0c18;
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            max-height: 180px;
            overflow-y: auto;
            margin-top: 4px;
        }

        .search-select .dropdown.open {
            display: block;
        }

        .search-select .dropdown .option {
            padding: 12px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: 0.15s;
        }

        .search-select .dropdown .option:hover,
        .search-select .dropdown .option:active {
            background: rgba(230, 57, 127, 0.08);
            color: #F9A8D4;
        }

        /* Pills */
        .pill-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .pill {
            padding: 8px 14px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #ccc;
            font-size: 13px;
            cursor: pointer;
            transition: 0.2s;
            user-select: none;
        }

        .pill:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .pill.active {
            background: rgba(230, 57, 127, 0.1);
            border-color: #E6397F;
            color: #F9A8D4;
        }

        /* Buttons */
        .btn-row {
            display: flex;
            gap: 10px;
            margin-top: 24px;
        }

        .btn-back {
            padding: 14px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: transparent;
            color: #666;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            font-family: 'Space Grotesk', sans-serif;
        }

        .btn-back:active {
            background: rgba(255, 255, 255, 0.04);
        }

        .btn-next {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #E6397F, #FF8A00);
            color: white;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            font-family: 'Space Grotesk', sans-serif;
        }

        .btn-next:active {
            transform: scale(0.98);
        }

        .btn-next:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.7s linear infinite;
            vertical-align: middle;
            margin-right: 8px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: #1a1a2e;
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #F0F0F0;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            z-index: 999;
            transition: 0.3s;
            opacity: 0;
            pointer-events: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 8px;
            max-width: calc(100vw - 32px);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.error {
            border-color: rgba(239, 68, 68, 0.2);
        }

        .toast.error i {
            color: #ef4444;
        }

        .toast i {
            font-size: 14px;
        }

        /* Success */
        .success-screen {
            text-align: center;
            padding: 16px 0;
        }

        .success-screen .s-icon {
            font-size: 48px;
            color: #22c55e;
            margin-bottom: 16px;
        }

        .success-screen h2 {
            margin-bottom: 8px;
            font-size: 20px;
            color: white;
        }

        .success-screen p {
            color: #777;
            font-size: 13px;
            line-height: 1.6;
        }

        .wa-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #25D366;
            color: white;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 700;
            text-decoration: none;
            margin-top: 20px;
            font-family: 'Space Grotesk', sans-serif;
            transition: 0.2s;
        }

        .wa-btn:active {
            transform: scale(0.97);
        }

        /* Branding */
        .brand-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
        }

        .brand-bar img {
            height: 22px;
            opacity: 0.5;
        }

        .brand-bar span {
            font-size: 10px;
            color: #444;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            font-weight: 600;
        }
    </style>
</head>

<body>

    <div class="card">
        <div class="brand-bar">
            <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png"
                alt="Logo">
            <span>Free Website Sample</span>
        </div>

        <div class="progress-bar">
            <div class="progress-dot active" id="prog1"></div>
            <div class="progress-dot" id="prog2"></div>
            <div class="progress-dot" id="prog3"></div>
        </div>

        <div class="step active" id="step1">
            <div class="step-num"><i class="fa-solid fa-building" style="font-size:10px;"></i> Step 1 of 3</div>
            <h2 class="step-title">What's Your Business Called?</h2>
            <p class="step-sub">We'll use this to personalize your free website sample.</p>

            <label class="field-label">Business Name</label>
            <input type="text" id="businessName" placeholder="e.g. Bright Smile Dental">

            <label class="field-label">Industry</label>
            <div class="search-select" id="industrySelect">
                <input type="text" id="industryInput" placeholder="Search or type your industry..." autocomplete="off"
                    onfocus="openDropdown()" oninput="filterIndustries()">
                <div class="dropdown" id="industryDropdown"></div>
            </div>

            <div class="btn-row">
                <button class="btn-next" onclick="nextStep(2)">Continue</button>
            </div>
        </div>

        <div class="step" id="step2">
            <div class="step-num"><i class="fa-solid fa-palette" style="font-size:10px;"></i> Step 2 of 3</div>
            <h2 class="step-title">Brand Style</h2>
            <p class="step-sub">Upload your logo so we can match your brand. No logo? Pick a style instead.</p>

            <div class="toggle-row">
                <div class="toggle-card" id="toggleYes" onclick="selectLogoToggle(true)">
                    <div class="t-icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                    <div class="t-label">I have a logo</div>
                    <div class="t-desc">Upload it below</div>
                </div>
                <div class="toggle-card" id="toggleNo" onclick="selectLogoToggle(false)">
                    <div class="t-icon"><i class="fa-solid fa-swatchbook"></i></div>
                    <div class="t-label">No logo yet</div>
                    <div class="t-desc">Pick colors + fonts</div>
                </div>
            </div>

            <div id="logoUploadArea" style="display:none;">
                <div class="upload-zone" id="logoZone" onclick="document.getElementById('logoFile').click()">
                    <input type="file" id="logoFile" accept="image/*" onchange="handleLogo(this)">
                    <div id="logoPlaceholder">
                        <div class="uz-icon"><i class="fa-solid fa-image"></i></div>
                        <p>Tap to upload your logo (PNG, JPG)</p>
                    </div>
                    <div id="logoPreviewArea" style="display:none;">
                        <img id="logoPreview" class="upload-preview">
                        <p class="filename" id="logoFileName"></p>
                    </div>
                </div>
            </div>

            <div id="manualStyleArea" style="display:none;">
                <label class="field-label">Color Palette</label>
                <div class="picker-grid" id="paletteGrid"></div>
                <label class="field-label">Font Style</label>
                <div class="picker-grid" id="fontGrid"></div>
            </div>

            <div class="btn-row">
                <button class="btn-back" onclick="prevStep(1)"><i class="fa-solid fa-arrow-left"
                        style="font-size:12px;"></i></button>
                <button class="btn-next" onclick="nextStep(3)">Continue</button>
            </div>
        </div>

        <div class="step" id="step3">
            <div class="step-num"><i class="fa-solid fa-pen-to-square" style="font-size:10px;"></i> Step 3 of 3</div>
            <h2 class="step-title">Tell Us More</h2>
            <p class="step-sub">The <strong style="color:#ccc;">more detail</strong> you provide, the <strong
                    style="color:#ccc;">better your sample</strong> will be. What does your business do? What <strong
                    style="color:#ccc;">services</strong> do you offer? Who are your <strong
                    style="color:#ccc;">customers</strong>?</p>

            <label class="field-label">About Your Business</label>
            <div class="strength-meter">
                <div class="strength-header">
                    <span>Detail Strength</span>
                    <span id="strengthLabel" class="strength-label"></span>
                </div>
                <div class="strength-bar-bg">
                    <div class="strength-bar-fill" id="strengthFill"></div>
                </div>
                <p class="strength-hint" id="strengthHint">More detail = better results</p>
            </div>
            <textarea id="extraNotes"
                placeholder="e.g. We are a family dental clinic in Tampines serving patients of all ages. We specialize in braces, whitening, and implants. We want a modern, trustworthy feel..."
                oninput="updateStrength()"></textarea>

            <label class="field-label">Phone Number</label>
            <p style="font-size:11px; color:#aaa; margin-bottom:8px; line-height:1.5;">
                <i class="fa-solid fa-triangle-exclamation"
                    style="color:#FF8A00; font-size:10px; margin-right:4px;"></i>
                <strong style="color:#ccc;">Required.</strong> This is how we send your completed sample back to you.
                Without it, we cannot deliver your page.
            </p>
            <input type="tel" id="clientPhone" placeholder="e.g. +65 9123 4567">

            <label class="field-label">Email <span style="font-weight:400;color:#555;">(optional â€” for status
                    updates)</span></label>
            <input type="text" id="clientEmail" placeholder="e.g. you@company.com">

            <label class="field-label">Competitor Website <span
                    style="font-weight:400;color:#555;">(optional)</span></label>
            <input type="url" id="competitorLink" placeholder="e.g. https://competitor.com"
                oninput="toggleCompetitorNotes()">

            <div id="competitorNotesArea" style="display:none; margin-top: 4px; padding-bottom: 8px;">
                <label class="field-label" style="color:#22c55e;">What do you like about it?</label>
                <div class="pill-container" id="competitorPills">
                    <div class="pill" onclick="this.classList.toggle('active')">Clean Layout</div>
                    <div class="pill" onclick="this.classList.toggle('active')">Color Scheme</div>
                    <div class="pill" onclick="this.classList.toggle('active')">Typography / Fonts</div>
                    <div class="pill" onclick="this.classList.toggle('active')">Animations / Effects</div>
                    <div class="pill" onclick="this.classList.toggle('active')">Professional Vibe</div>
                    <div class="pill" onclick="this.classList.toggle('active')">Images / Photography</div>
                </div>
                <textarea id="competitorText" placeholder="Any other specific details? (Optional)"
                    style="min-height: 80px; margin-bottom: 8px;"></textarea>
            </div>

            <div style="position:absolute;left:-9999px;" aria-hidden="true">
                <input type="text" id="_website" name="_website" tabindex="-1" autocomplete="off">
            </div>

            <div class="btn-row">
                <button class="btn-back" onclick="prevStep(2)"><i class="fa-solid fa-arrow-left"
                        style="font-size:12px;"></i></button>
                <button class="btn-next" id="submitBtn" onclick="handleSubmit()">Get My Free Sample</button>
            </div>
        </div>

        <div class="step" id="stepDone">
            <div class="success-screen">
                <div class="s-icon"><i class="fa-solid fa-circle-check"></i></div>
                <h2>We received your data!</h2>
                <p>Our team is reviewing your details to ensure the highest quality sample. We will also manually
                    review any references provided.</p>
                <p style="margin-top:12px; color:#ccc; font-weight:600;">While you wait, check out our work:</p>

                <div style="display:flex; flex-direction:column; gap:12px; max-width:280px; margin: 20px auto;">
                    <a href="https://reputifly.com/portfolio" target="_blank" class="btn-back"
                        style="text-decoration:none; display:flex; align-items:center; justify-content:center; gap:8px;">
                        <i class="fa-solid fa-briefcase"></i> View Our Portfolio
                    </a>
                    <a href="https://reputifly.com/web-development" target="_blank" class="btn-back"
                        style="text-decoration:none; display:flex; align-items:center; justify-content:center; gap:8px;">
                        <i class="fa-solid fa-code"></i> Web Design Services
                    </a>
                    <a href="https://reputifly.com/blog" target="_blank" class="btn-back"
                        style="text-decoration:none; display:flex; align-items:center; justify-content:center; gap:8px;">
                        <i class="fa-solid fa-book-open"></i> Read Our Blog
                    </a>
                </div>

                <p style="margin-top:24px; color:#777; font-size:12px;">Need to talk to us directly?</p>
                <a id="waLink" href="#" target="_blank" class="wa-btn" style="margin-top:8px;">
                    <i class="fa-brands fa-whatsapp" style="font-size:18px;"></i> Message Us on WhatsApp
                </a>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <i class="fa-solid fa-circle-exclamation" id="toastIcon"></i>
        <span id="toastMsg"></span>
    </div>

    <script>
        const API_URL = "https://asia-southeast1-b2b-software.cloudfunctions.net/nexusDesignPack";
        const WA_NUMBER = "6580111965";

        // -- Data --
        const INDUSTRIES = [
            "Dental / Healthcare", "Restaurant / Food & Beverage", "Real Estate / Property",
            "Tech / SaaS / Startup", "E-Commerce / Retail", "Education / Tutoring",
            "Fitness / Wellness / Spa", "Legal / Consulting", "Construction / Home Services",
            "Photography / Creative Agency", "Non-Profit / Charity", "Automotive",
            "Beauty / Salon", "Travel / Hospitality", "Finance / Insurance",
            "Marketing Agency", "Interior Design", "Renovation / Interior Design", "Pet Services", "Event Planning",
            "Logistics / Shipping", "Moving / Transport", "Maxicab / Limo", "Cleaning Services", "Accounting / Tax"
        ];

        const PALETTES = [
            { name: "Ocean", colors: ["#0ea5e9", "#0284c7", "#e0f2fe", "#0c4a6e"] },
            { name: "Sunset", colors: ["#f97316", "#ea580c", "#fff7ed", "#431407"] },
            { name: "Forest", colors: ["#22c55e", "#15803d", "#f0fdf4", "#14532d"] },
            { name: "Royal", colors: ["#8b5cf6", "#6d28d9", "#f5f3ff", "#3b0764"] },
            { name: "Rose", colors: ["#e11d48", "#be123c", "#fff1f2", "#4c0519"] },
            { name: "Slate", colors: ["#64748b", "#334155", "#f8fafc", "#0f172a"] },
        ];

        const FONTS = [
            { name: "Modern", family: "'Space Grotesk', sans-serif", demo: "Ag" },
            { name: "Clean", family: "'Inter', sans-serif", demo: "Ag" },
            { name: "Elegant", family: "Georgia, serif", demo: "Ag" },
        ];

        // -- State --
        let hasLogo = null;
        let logoFile = null;
        let selectedPalette = null;
        let selectedFont = null;
        let currentStep = 1;

        // -- Init --
        document.addEventListener('DOMContentLoaded', () => {
            renderPalettes();
            renderFonts();
            renderDropdown('industryDropdown', INDUSTRIES, 'industryInput');
            document.addEventListener('click', (e) => {
                if (!e.target.closest('#industrySelect')) document.getElementById('industryDropdown').classList.remove('open');
            });
        });

        function renderPalettes() {
            const grid = document.getElementById('paletteGrid');
            PALETTES.forEach((p, i) => {
                grid.innerHTML += `
            <div class="picker-item" onclick="pickPalette(${i})" id="pal${i}">
                <div class="swatch-row">
                    ${p.colors.map(c => `<div class="swatch" style="background:${c}"></div>`).join('')}
                </div>
                <div>${p.name}</div>
            </div>`;
            });
        }

        function renderFonts() {
            const grid = document.getElementById('fontGrid');
            FONTS.forEach((f, i) => {
                grid.innerHTML += `
            <div class="picker-item" onclick="pickFont(${i})" id="font${i}">
                <div class="font-demo" style="font-family:${f.family}">${f.demo}</div>
                <div>${f.name}</div>
            </div>`;
            });
        }

        // -- Searchable Dropdown --
        function renderDropdown(containerId, items, inputId) {
            const container = document.getElementById(containerId);
            container.innerHTML = items.map(item =>
                `<div class="option" onclick="selectOption('${inputId}','${containerId}','${item}')">${item}</div>`
            ).join('');
        }

        function selectOption(inputId, dropdownId, value) {
            document.getElementById(inputId).value = value;
            document.getElementById(dropdownId).classList.remove('open');
        }

        function openDropdown() {
            document.getElementById('industryDropdown').classList.add('open');
            filterIndustries();
        }

        function filterIndustries() {
            const val = document.getElementById('industryInput').value.toLowerCase();
            const dd = document.getElementById('industryDropdown');
            const filtered = INDUSTRIES.filter(i => i.toLowerCase().includes(val));
            dd.innerHTML = filtered.map(item =>
                `<div class="option" onclick="selectOption('industryInput','industryDropdown','${item}')">${item}</div>`
            ).join('');
            if (filtered.length === 0) {
                dd.innerHTML = `<div class="option" style="color:#555;pointer-events:none;">Type your own industry above</div>`;
            }
            dd.classList.add('open');
        }

        // -- Interactions --
        function selectLogoToggle(yes) {
            hasLogo = yes;
            document.getElementById('toggleYes').classList.toggle('selected', yes);
            document.getElementById('toggleNo').classList.toggle('selected', !yes);
            document.getElementById('logoUploadArea').style.display = yes ? 'block' : 'none';
            document.getElementById('manualStyleArea').style.display = yes ? 'none' : 'block';
        }

        function pickPalette(i) {
            selectedPalette = PALETTES[i];
            document.querySelectorAll('#paletteGrid .picker-item').forEach(el => el.classList.remove('selected'));
            document.getElementById('pal' + i).classList.add('selected');
        }

        function pickFont(i) {
            selectedFont = FONTS[i];
            document.querySelectorAll('#fontGrid .picker-item').forEach(el => el.classList.remove('selected'));
            document.getElementById('font' + i).classList.add('selected');
        }

        const MAX_FILE_SIZE = 3 * 1024 * 1024; // 3MB

        function handleLogo(input) {
            const file = input.files[0];
            if (!file) return;

            if (file.size > MAX_FILE_SIZE) {
                // Compress via canvas
                compressImage(file, (compressedBlob) => {
                    if (compressedBlob.size > MAX_FILE_SIZE) {
                        showToast("Image is still too large after compression. Please use a smaller file.");
                        input.value = '';
                        return;
                    }
                    logoFile = new File([compressedBlob], file.name.replace(/\.\w+$/, '.jpg'), { type: 'image/jpeg' });
                    showPreview(URL.createObjectURL(logoFile), logoFile.name);
                    showToast("Image was compressed to fit the 3MB limit.", false);
                });
            } else {
                logoFile = file;
                const reader = new FileReader();
                reader.onload = (e) => showPreview(e.target.result, file.name);
                reader.readAsDataURL(file);
            }
        }

        function compressImage(file, callback) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    let w = img.width, h = img.height;
                    const MAX_DIM = 1200;
                    if (w > MAX_DIM || h > MAX_DIM) {
                        const ratio = Math.min(MAX_DIM / w, MAX_DIM / h);
                        w = Math.round(w * ratio);
                        h = Math.round(h * ratio);
                    }
                    canvas.width = w;
                    canvas.height = h;
                    canvas.getContext('2d').drawImage(img, 0, 0, w, h);
                    canvas.toBlob(callback, 'image/jpeg', 0.8);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function showPreview(src, name) {
            document.getElementById('logoPreview').src = src;
            document.getElementById('logoFileName').innerText = name;
            document.getElementById('logoPlaceholder').style.display = 'none';
            document.getElementById('logoPreviewArea').style.display = 'block';
            document.getElementById('logoZone').classList.add('has-file');
        }

        function updateStrength() {
            const text = document.getElementById('extraNotes').value;
            // Count alphanumeric characters to prevent "s s s s s" cheating
            const charCount = text.replace(/[^a-zA-Z0-9]/g, '').length;

            const maxChars = 98; // reduced by 18% (was 120)
            let pct = Math.min((charCount / maxChars) * 100, 100);

            const fill = document.getElementById('strengthFill');
            const label = document.getElementById('strengthLabel');
            const hint = document.getElementById('strengthHint');

            fill.style.width = pct + '%';

            if (charCount === 0) {
                label.textContent = "";
                fill.style.backgroundColor = "transparent";
                fill.style.boxShadow = "none";
                hint.innerHTML = "More detail = better results";
                hint.style.color = "#777";
            } else if (charCount < 33) { // reduced by 18% (was 40)
                label.textContent = "Mediocre";
                label.style.color = "#ef4444";
                fill.style.backgroundColor = "#ef4444";
                fill.style.boxShadow = "0 0 8px rgba(239, 68, 68, 0.3)";
                hint.innerHTML = "<strong>Keep going!</strong> What services do you offer?";
                hint.style.color = "#e5e5e5";
            } else if (charCount < 74) { // reduced by 18% (was 90)
                label.textContent = "Strong";
                label.style.color = "#FF8A00";
                fill.style.backgroundColor = "#FF8A00";
                fill.style.boxShadow = "0 0 8px rgba(255, 138, 0, 0.3)";
                hint.innerHTML = "<strong>Great!</strong> Any specific vibe or target audience?";
                hint.style.color = "#e5e5e5";
            } else {
                label.textContent = "Excellent";
                label.style.color = "#22c55e";
                fill.style.backgroundColor = "#22c55e";
                fill.style.boxShadow = "0 0 10px rgba(34, 197, 94, 0.4)";
                hint.innerHTML = "<strong>Perfect!</strong> We have everything we need to craft an amazing sample.";
                hint.style.color = "#22c55e";
            }
        }

        // -- Toast --
        function showToast(msg, isError = true) {
            const toast = document.getElementById('toast');
            const icon = document.getElementById('toastIcon');
            document.getElementById('toastMsg').textContent = msg;
            toast.className = 'toast show' + (isError ? ' error' : '');
            icon.className = isError ? 'fa-solid fa-circle-exclamation' : 'fa-solid fa-circle-check';
            if (!isError) icon.style.color = '#22c55e';
            else icon.style.color = '';
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function toggleCompetitorNotes() {
            const link = document.getElementById('competitorLink').value.trim();
            const area = document.getElementById('competitorNotesArea');
            area.style.display = link.length > 0 ? 'block' : 'none';
        }

        // -- Navigation --
        function nextStep(n) {
            if (currentStep === 1) {
                if (!document.getElementById('businessName').value.trim()) return showToast("Please enter your business name.");
                if (!document.getElementById('industryInput').value.trim()) return showToast("Please enter or select your industry.");
            }
            if (currentStep === 2) {
                if (hasLogo === null) return showToast("Please select whether you have a logo.");
                if (hasLogo && !logoFile) return showToast("Please upload your logo.");
                if (!hasLogo && !selectedPalette) return showToast("Please pick a color palette.");
                if (!hasLogo && !selectedFont) return showToast("Please pick a font style.");
            }

            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + n).classList.add('active');
            currentStep = n;
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function prevStep(n) {
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + n).classList.add('active');
            currentStep = n;
            updateProgress();
        }

        function updateProgress() {
            for (let i = 1; i <= 3; i++) {
                const dot = document.getElementById('prog' + i);
                dot.classList.remove('active', 'done');
                if (i < currentStep) dot.classList.add('done');
                if (i === currentStep) dot.classList.add('active');
            }
        }

        // -- Submit --
        async function handleSubmit() {
            const btn = document.getElementById('submitBtn');
            const businessName = document.getElementById('businessName').value.trim();
            const industry = document.getElementById('industryInput').value.trim();
            const extraNotes = document.getElementById('extraNotes').value.trim();
            const clientPhone = document.getElementById('clientPhone').value.trim();
            const clientEmail = document.getElementById('clientEmail').value.trim();
            const competitorLink = document.getElementById('competitorLink').value.trim();
            const competitorText = document.getElementById('competitorText').value.trim();
            const honeypot = document.getElementById('_website').value;

            // Gather active pills
            const activePills = Array.from(document.querySelectorAll('#competitorPills .pill.active'))
                .map(p => p.textContent);

            let competitorNotes = activePills.join(', ');
            if (competitorText) {
                competitorNotes += (competitorNotes ? '. ' : '') + competitorText;
            }

            if (!clientPhone) return showToast("Please enter your phone number.");

            btn.disabled = true;
            btn.innerHTML = '<span class="spinner"></span> Submitting...';

            // ---- 1. GUARANTEED LEAD CAPTURE (STANDARD API) ----
            const leadPayload = {
                "_to": "runikojane@gmail.com",
                "_subject": `ðŸ”µ New Nexus Intake Lead (Manual): ${businessName}`,
                "Name": businessName,
                "Phone": clientPhone,
                "Email": clientEmail || "Not provided",
                "Industry": industry,
                "Notes": extraNotes || "N/A",
                "Source": "Nexus Intake Form"
            };

            // Inject the competitor data
            if (competitorLink) {
                leadPayload["Competitor Website"] = competitorLink;
                if (competitorNotes) {
                    leadPayload["Competitor Preferences"] = competitorNotes;
                }
            }

            // Inject the Design Styles so you can prompt the AI manually
            if (!hasLogo && selectedPalette) {
                leadPayload["Selected Colors"] = `Primary ${selectedPalette.colors[0]}, Accent ${selectedPalette.colors[1]}, Background ${selectedPalette.colors[2]}, Text ${selectedPalette.colors[3]}`;
            }
            if (!hasLogo && selectedFont) {
                leadPayload["Selected Font"] = `${selectedFont.name} (${selectedFont.family})`;
            }

            if (honeypot) leadPayload['_website'] = honeypot;

            fetch('https://asia-southeast1-b2b-software.cloudfunctions.net/reputifly', {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(leadPayload)
            }).then(r => console.log("Lead secured via standard API", r.status))
                .catch(e => console.warn("Standard DB lead capture error:", e));

            // ---- 2. AI BYPASS (FILE UPLOAD API) ----
            // We still hit nexusDesignPack to process the logo file, but we intentionally
            // send a "MANUAL_MODE_BYPASS" instruction.

            // Build the real description so the AI knows what to do in the Prompt Pack!
            let richDesc = `[MANUAL_MODE_BYPASS]\nIndustry: ${industry}. `;
            if (extraNotes) richDesc += `Business details from the client: ${extraNotes}. `;
            if (!hasLogo && selectedPalette) richDesc += `Manual palette: Primary ${selectedPalette.colors[0]}, Accent ${selectedPalette.colors[1]}. `;
            if (!hasLogo && selectedFont) richDesc += `Heading font: ${selectedFont.name}.`;

            const formData = new FormData();
            formData.append('businessName', businessName);
            formData.append('businessDesc', richDesc);
            formData.append('recipientEmail', 'runikojane@gmail.com');
            if (clientEmail) formData.append('clientEmail', clientEmail);
            if (hasLogo && logoFile) {
                formData.append('logo', logoFile);
            }

            fetch(API_URL, { method: 'POST', body: formData })
                .then(response => {
                    if (!response.ok) {
                        console.warn('Backend returned error for manual generation (logo was safely sent to zip fallback).');
                    }
                })
                .catch(err => {
                    console.warn('Network error on file upload:', err);
                });

            // Immediately show success screen & redirect to WhatsApp
            document.getElementById('step3').classList.remove('active');
            document.getElementById('stepDone').classList.add('active');
            document.querySelector('.progress-bar').style.display = 'none';

            // Build WhatsApp link
            const waMsg = encodeURIComponent(`Hi, I just submitted a website sample request for "${businessName}" (${industry}). My number is ${clientPhone}. Looking forward to seeing the sample!`);
            document.getElementById('waLink').href = `https://wa.me/${WA_NUMBER}?text=${waMsg}`;

            // Auto-open WhatsApp after a short delay so the user sees the success screen
            setTimeout(() => {
                window.open(`https://wa.me/${WA_NUMBER}?text=${waMsg}`, '_blank');
            }, 1500);
        }
    </script>
</body>

</html>
