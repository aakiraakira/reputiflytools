<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <title>Reputifly | Secure Access</title>

    <link rel="icon" type="image/png"
        href="https://media.licdn.com/dms/image/v2/D560BAQEScnUkJITXAg/company-logo_200_200/B56ZajOckKHsAI-/0/1746495195792?e=2147483647&v=beta&t=Z7yQpp5jSwm-De46D45WIC5fY_2w0GVgEWLoEOM1aug">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>

    <style>
        :root {
            --bg-deep: #0B0A14;
            --accent-primary: #E6397F;
            --accent-secondary: #FF8A00;
        }

        /* --- GLOBAL BACKGROUND --- */
        body {
            background-color: var(--bg-deep);
            color: #F0F0F0;
            font-family: 'Inter', sans-serif;
            height: 100dvh;
            /* Dynamic viewport height for mobile */
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: fixed;
            /* Prevents rubber-banding/scroll on iOS */
            inset: 0;
            touch-action: none;
            /* Disables double-tap zoom */
        }

        /* Ambient Glow Blobs (From Note App) */
        .ambient-glow {
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(230, 57, 127, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: -1;
            filter: blur(80px);
            animation: drift 20s infinite alternate;
        }

        .glow-1 {
            top: -200px;
            left: -100px;
        }

        .glow-2 {
            bottom: -200px;
            right: -100px;
            background: radial-gradient(circle, rgba(255, 138, 0, 0.1) 0%, transparent 70%);
        }

        @keyframes drift {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(30px, 50px);
            }
        }

        /* --- RAINBOW BORDER CONTAINER --- */
        .rainbow-p-container {
            position: relative;
            z-index: 0;
            border-radius: 24px;
            /* Match inner rounding */
            padding: 2px;
            /* Thickness of the rainbow border */
            overflow: hidden;
            box-shadow: 0 40px 80px -10px rgba(0, 0, 0, 0.6);
        }

        /* The Spinning Gradient */
        .rainbow-p-container::before {
            content: "";
            position: absolute;
            z-index: -1;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent,
                    transparent,
                    #E6397F,
                    #FF8A00,
                    #E6397F,
                    transparent,
                    transparent);
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            100% {
                transform: rotate(1turn);
            }
        }

        /* --- INNER GLASS CARD --- */
        .glass-inner {
            background: rgba(11, 10, 20, 0.95);
            /* Dark enough to hide the gradient center */
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border-radius: 22px;
            /* Slightly less than container */
            height: 100%;
            width: 100%;
            position: relative;
            z-index: 1;
        }

        /* --- LIQUID BUTTON (From Kit) --- */
        .btn-liquid-glow {
            background: radial-gradient(circle at top, rgba(255, 255, 255, 0.4) 0%, transparent 60%),
                linear-gradient(90deg, #E6397F, #FF8A00);
            box-shadow: 0 10px 30px -10px rgba(230, 57, 127, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.4);
            border: none;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border-radius: 9999px;
            /* Fully Rounded Pill */
            color: white;
            font-weight: 700;
            padding: 14px;
            width: 100%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            height: 50px;
            /* Fixed height to prevent collapse on loading */
        }

        .btn-liquid-glow:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(255, 138, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .btn-liquid-glow:active {
            transform: translateY(0);
        }

        .btn-liquid-glow:disabled {
            opacity: 0.8;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* --- INPUT FIELDS --- */
        .input-glass {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 16px;
            /* High Rounding */
            padding: 14px 16px 14px 44px;
            /* Left padding for icon */
            width: 100%;
            outline: none;
            transition: all 0.3s ease;
            font-size: 16px;
            /* 16px prevents iOS zoom on focus */
        }

        .input-glass:focus {
            border-color: var(--accent-primary);
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 0 4px rgba(230, 57, 127, 0.1);
        }

        .input-glass::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        /* --- UTILS --- */
        .brand-font {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-left-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>

<body>

    <div class="ambient-glow glow-1"></div>
    <div class="ambient-glow glow-2"></div>

    <div class="rainbow-p-container w-full max-w-sm">

        <div class="glass-inner p-8 relative">

            <div class="text-center mb-8 mt-2">
                <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png"
                    class="h-10 mx-auto mb-4 brightness-125 object-contain">
                <h1 class="text-2xl font-bold brand-font text-white">Workspace Login</h1>
                <p class="text-sm text-gray-500 mt-2">Enter credentials to log in your account.</p>
            </div>

            <form id="login-form" class="space-y-5">
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-wider ml-1">Email
                        Identity</label>
                    <div class="relative">
                        <input type="email" id="email" class="input-glass" placeholder="name@company.com" required>
                        <i data-feather="mail"
                            class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"></i>
                    </div>
                </div>

                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-wider ml-1">Secure
                        Key</label>
                    <div class="relative">
                        <input type="password" id="password" class="input-glass" placeholder="••••••••" required>
                        <i data-feather="lock"
                            class="absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"></i>
                    </div>
                </div>

                <div class="pt-4">
                    <button type="submit" id="btn-submit" class="btn-liquid-glow group">
                        <span id="btn-content" class="flex items-center gap-2">
                            <span>Authenticate</span>
                            <i data-feather="arrow-right"
                                class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                        </span>

                        <div id="btn-loader" class="hidden flex items-center gap-2">
                            <div class="spinner"></div>
                            <span>Verifying...</span>
                        </div>
                    </button>
                </div>

                <p id="error-msg"
                    class="text-red-400 text-xs text-center mt-4 bg-red-500/10 border border-red-500/20 p-2 rounded-lg hidden flex items-center justify-center gap-2">
                    <i data-feather="alert-circle" class="w-3 h-3"></i>
                    <span id="error-text"></span>
                </p>
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // CONFIG
        const firebaseConfig = {
            apiKey: "AIzaSyC9eUHEdAmV9qzHxpQe2en5WeOeRXiq10A",
            authDomain: "b2b-software.firebaseapp.com",
            projectId: "b2b-software"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const SUPER_ADMIN = "realjuliantung@gmail.com";

        // LOGIC
        const loginForm = document.getElementById('login-form');
        const btnSubmit = document.getElementById('btn-submit');
        const btnContent = document.getElementById('btn-content');
        const btnLoader = document.getElementById('btn-loader');
        const errorMsg = document.getElementById('error-msg');
        const errorText = document.getElementById('error-text');

        // Initialize Icons
        feather.replace();

        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // 1. UI Loading State
            setLoading(true);

            try {
                // 2. Firebase Auth
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // 3. Traffic Control
                setTimeout(() => {
                    if (user.email === SUPER_ADMIN) {
                        window.location.href = "dashboard.html"; // Master
                    } else {
                        window.location.href = "client.html"; // Client
                    }
                }, 1000); // 1s delay to show the nice spinner

            } catch (error) {
                // 4. Error Handling
                setLoading(false);
                let msg = "Invalid credentials.";
                if (error.code === 'auth/user-not-found') msg = "User not found.";
                if (error.code === 'auth/wrong-password') msg = "Incorrect password.";
                showError(msg);
                console.error(error);
            }
        });

        function setLoading(isLoading) {
            if (isLoading) {
                btnSubmit.disabled = true;
                btnContent.classList.add('hidden');
                btnLoader.classList.remove('hidden');
                errorMsg.classList.add('hidden');
            } else {
                btnSubmit.disabled = false;
                btnContent.classList.remove('hidden');
                btnLoader.classList.add('hidden');
            }
        }

        function showError(msg) {
            errorText.innerText = msg;
            errorMsg.classList.remove('hidden');
            // Shake animation on the card
            const panel = document.querySelector('.rainbow-p-container');
            panel.animate([
                { transform: 'translateX(0)' },
                { transform: 'translateX(-4px)' },
                { transform: 'translateX(4px)' },
                { transform: 'translateX(0)' }
            ], { duration: 300 });
        }
    </script>
</body>

</html>
