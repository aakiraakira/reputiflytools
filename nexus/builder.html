<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reputifly | The Architect</title>

    <link rel="icon" type="image/png"
        href="https://media.licdn.com/dms/image/v2/D560BAQEScnUkJITXAg/company-logo_200_200/B56ZajOckKHsAI-/0/1746495195792?e=2147483647&v=beta&t=Z7yQpp5jSwm-De46D45WIC5fY_2w0GVgEWLoEOM1aug">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>

    <style>
        :root {
            --bg-deep: #0B0A14;
            --accent-primary: #E6397F;
            --accent-secondary: #FF8A00;
            --text-main: #F0F0F0;
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(20, 20, 30, 0.6);
        }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            -webkit-font-smoothing: antialiased;
        }

        ::selection {
            background: var(--accent-primary);
            color: white;
        }

        h1,
        h2,
        h3,
        .brand-font {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        /* Ambient Glow */
        .ambient-glow {
            position: fixed;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(230, 57, 127, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
            z-index: -2;
            filter: blur(80px);
            animation: drift 20s infinite alternate;
        }

        .glow-1 {
            top: -200px;
            left: -100px;
        }

        .glow-2 {
            bottom: -200px;
            right: -100px;
            background: radial-gradient(circle, rgba(255, 138, 0, 0.1) 0%, transparent 70%);
        }

        @keyframes drift {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(30px, 50px);
            }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            transition: background 0.3s;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid var(--glass-border);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), border-color 0.3s ease;
        }

        .builder-input {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 12px;
            padding: 12px 16px;
            width: 100%;
            outline: none;
            font-size: 14px;
            transition: all 0.2s;
        }

        .builder-input:focus {
            border-color: var(--accent-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-liquid-glow {
            background: radial-gradient(circle at top, rgba(255, 255, 255, 0.4) 0%, transparent 60%),
                linear-gradient(90deg, #E6397F, #FF8A00);
            box-shadow: 0 10px 30px -10px rgba(230, 57, 127, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.4), inset 0 -2px 0 rgba(0, 0, 0, 0.2);
            border: none;
            border-radius: 9999px;
            color: white;
            font-weight: 700;
            padding: 12px 30px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-liquid-glow:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 20px 40px -10px rgba(255, 138, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.6);
        }

        .btn-hero-glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            color: #ccc;
            font-weight: 600;
            padding: 10px 24px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-hero-glass:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
            transform: translateY(-2px);
        }

        .step-container {
            display: none;
            animation: fadeIn 0.4s ease-out forwards;
        }

        .step-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 99px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .toggle-switch.active {
            background: rgba(230, 57, 127, 0.2);
            border-color: rgba(230, 57, 127, 0.5);
        }

        .toggle-knob {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: #888;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
        }

        .toggle-switch.active .toggle-knob {
            left: 22px;
            background: #E6397F;
            box-shadow: 0 0 10px rgba(230, 57, 127, 0.5);
        }
    </style>
</head>

<body>

    <div class="ambient-glow glow-1"></div>
    <div class="ambient-glow glow-2"></div>

    <nav
        class="h-16 border-b border-white/5 bg-black/20 backdrop-blur-md flex items-center justify-between px-6 sticky top-0 z-40">
        <div class="flex items-center gap-3">
            <img src="https://reputifly.com/wp-content/uploads/2025/05/cropped-reputifly-new-e1746390492876.png"
                class="h-6 brightness-125">
            <span class="text-sm font-bold text-gray-400 brand-font">THE ARCHITECT</span>
        </div>
        <div class="flex gap-3">
            <a href="dashboard.html" class="btn-hero-glass">
                <i data-feather="arrow-left" class="w-4 h-4"></i> Dashboard
            </a>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-6 py-12 relative z-10">
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold mb-4 brand-font text-white">Integration Flow Designer</h1>
            <p class="text-gray-400 text-lg">Generate seamless PHP snippets or AI Prompts to instantly integrate any
                client into Reputifly.</p>
        </div>

        <div class="glass-panel p-8">

            <!-- STEP 1: Core Target -->
            <div id="step-1" class="step-container active">
                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-6 flex items-center gap-2">
                    <i data-feather="target" class="w-4 h-4"></i> Step 1: Routing
                </h3>

                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-300 mb-2">Target Emails</label>
                        <p class="text-xs text-gray-500 mb-3">Where should the notifications instantly go? (Comma
                            separate for multiple)</p>
                        <input type="text" id="config-to" class="builder-input"
                            placeholder="e.g. client@business.com, sales@business.com">
                    </div>
                </div>

                <div class="mt-8 flex justify-end">
                    <button onclick="nextStep(2)" class="btn-liquid-glow">Next: Branding & Auto-Reply <i
                            data-feather="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <!-- STEP 2: Auto-Reply & Branding -->
            <div id="step-2" class="step-container">
                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-6 flex items-center gap-2">
                    <i data-feather="mail" class="w-4 h-4"></i> Step 2: Customer Experience
                </h3>

                <div class="space-y-8">
                    <div class="flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/10">
                        <div>
                            <h4 class="font-bold text-white mb-1">Enable Auto-Reply</h4>
                            <p class="text-xs text-gray-400">Instantly email the lead acknowledging their submission.
                            </p>
                        </div>
                        <div class="toggle-switch" id="toggle-autoreply" onclick="toggleAutoReply()">
                            <div class="toggle-knob"></div>
                        </div>
                    </div>

                    <div id="autoreply-settings" class="space-y-6 hidden border-l-2 border-pink-500/50 pl-6 ml-2">
                        <div>
                            <label class="block text-sm font-semibold text-gray-300 mb-2">Sender Name</label>
                            <input type="text" id="config-sender" class="builder-input" placeholder="e.g. Apex Roofing">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-300 mb-2">Brand Logo URL</label>
                            <input type="text" id="config-logo" class="builder-input"
                                placeholder="https://... (PNG or JPG)">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-300 mb-2">Auto-Reply Subject</label>
                            <input type="text" id="config-subject" class="builder-input"
                                value="We received your message!">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-gray-300 mb-2">Custom Auto-Reply HTML Body
                                (Optional)</label>
                            <p class="text-xs text-gray-500 mb-2">Leave blank to use the standard default text.</p>
                            <textarea id="config-body" class="builder-input min-h-[100px]"
                                placeholder="<p>Hey there, thanks for dropping by! We will contact you shortly.</p>"></textarea>
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex justify-between">
                    <button onclick="nextStep(1)" class="btn-hero-glass"><i data-feather="arrow-left"
                            class="w-4 h-4"></i> Back</button>
                    <button onclick="nextStep(3)" class="btn-liquid-glow">Next: Integration Type <i
                            data-feather="arrow-right" class="w-4 h-4"></i></button>
                </div>
            </div>

            <!-- STEP 3: Integration Type -->
            <div id="step-3" class="step-container">
                <h3 class="text-xs font-bold uppercase tracking-widest text-gray-500 mb-6 flex items-center gap-2">
                    <i data-feather="code" class="w-4 h-4"></i> Step 3: Platform Integration
                </h3>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="relative group cursor-pointer" onclick="generateIntegration('woocommerce')">
                        <div
                            class="absolute inset-0 bg-blue-500/20 rounded-xl blur transition group-hover:bg-blue-500/40">
                        </div>
                        <div
                            class="relative bg-[#111018] border border-white/10 p-6 rounded-xl hover:border-blue-500/50 transition h-full">
                            <i data-feather="shopping-cart" class="w-8 h-8 text-blue-400 mb-4"></i>
                            <h4 class="font-bold text-white text-lg mb-2">WooCommerce Tracker</h4>
                            <p class="text-sm text-gray-400">Generates a silent PHP snippet for functions.php to capture
                                orders seamlessly.</p>
                        </div>
                    </div>

                    <div class="relative group cursor-pointer" onclick="generateIntegration('custom')">
                        <div
                            class="absolute inset-0 bg-pink-500/20 rounded-xl blur transition group-hover:bg-pink-500/40">
                        </div>
                        <div
                            class="relative bg-[#111018] border border-white/10 p-6 rounded-xl hover:border-pink-500/50 transition h-full">
                            <i data-feather="layout" class="w-8 h-8 text-pink-400 mb-4"></i>
                            <h4 class="font-bold text-white text-lg mb-2">Website Form (AI Prompt)</h4>
                            <p class="text-sm text-gray-400">Generates a massive engineering prompt to paste into
                                Claude/ChatGPT for building native HTML/JS forms.</p>
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex justify-start">
                    <button onclick="nextStep(2)" class="btn-hero-glass"><i data-feather="arrow-left"
                            class="w-4 h-4"></i> Back</button>
                </div>
            </div>

            <!-- STEP 4: RESULT -->
            <div id="step-4" class="step-container">
                <div class="flex justify-between items-center mb-6">
                    <h3 id="result-title" class="text-lg font-bold text-white flex items-center gap-2">
                        <i data-feather="check-circle" class="w-5 h-5 text-green-400"></i> Generation Complete
                    </h3>
                    <button onclick="nextStep(3)" class="btn-hero-glass text-xs py-1.5 px-3">Start Over</button>
                </div>

                <div class="bg-[#1e1e1e] border border-white/10 rounded-xl overflow-hidden relative">
                    <pre
                        class="m-0 p-6 text-xs font-mono max-h-[500px] overflow-auto"><code id="result-code" class="language-php"></code></pre>
                    <button onclick="copyResult()"
                        class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded text-xs backdrop-blur-md border border-white/10 transition flex items-center gap-2">
                        <i data-feather="copy" class="w-3 h-3"></i> Copy to Clipboard
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Init Feather Icons
        feather.replace();

        let isAutoReplyEnabled = false;

        function toggleAutoReply() {
            const toggle = document.getElementById('toggle-autoreply');
            const settings = document.getElementById('autoreply-settings');
            isAutoReplyEnabled = !isAutoReplyEnabled;

            if (isAutoReplyEnabled) {
                toggle.classList.add('active');
                settings.classList.remove('hidden');
            } else {
                toggle.classList.remove('active');
                settings.classList.add('hidden');
            }
        }

        function nextStep(stepNumber) {
            document.querySelectorAll('.step-container').forEach(el => el.classList.remove('active'));
            document.getElementById('step-' + stepNumber).classList.add('active');
        }

        function generateIntegration(type) {
            const toEmail = document.getElementById('config-to').value || 'admin@reputifly.com';
            const senderName = document.getElementById('config-sender').value || 'Our Company';
            const logo = document.getElementById('config-logo').value || '';
            const subject = document.getElementById('config-subject').value || 'Thanks for reaching out!';
            const body = document.getElementById('config-body').value || '';

            // Clean up body HTML formatting for code inserts
            const cleanBody = body.replace(/"/g, '\\"').replace(/\n/g, ' ');

            let finalOutput = '';
            let codeLang = '';
            let title = '';

            if (type === 'woocommerce') {
                title = "WooCommerce functions.php Snippet";
                codeLang = 'language-php';

                let payloadArray = `
        '_to'                 => '${toEmail}',
        '_subject'            => 'WooCommerce Order #' . $order_id,`;

                if (isAutoReplyEnabled) {
                    payloadArray += `
        '_auto_reply'         => true,
        '_auto_reply_subject' => '${subject}',
        '_sender_name'        => '${senderName}',`;
                    if (logo) payloadArray += `\n        '_brand_logo'         => '${logo}',`;
                    if (cleanBody) payloadArray += `\n        '_auto_reply_content' => "${cleanBody}",`;
                }

                finalOutput = `// ==========================================
// REPUTIFLY SILENT WOOCOMMERCE TRACKER
// Paste this at the bottom of functions.php
// ==========================================

add_action( 'woocommerce_thankyou', 'send_order_to_reputifly_api', 10, 1 );

function send_order_to_reputifly_api( $order_id ) {
    if ( ! $order_id ) return;
    $order = wc_get_order( $order_id );

    // Build the payload
    $payload = array(${payloadArray}
        'Name'         => $order->get_billing_first_name() . ' ' . $order->get_billing_last_name(),
        'Email'        => $order->get_billing_email(),
        'Phone'        => $order->get_billing_phone(),
        'Order Total'  => html_entity_decode( strip_tags( wc_price( $order->get_total(), array('currency' => $order->get_currency()) ) ) ),
        'Order Status' => wc_get_order_status_name( $order->get_status() ),
        'Source'       => 'WooCommerce Checkout'
    );

    // Send payload async to Reputifly
    wp_remote_post( 'https://asia-southeast1-b2b-software.cloudfunctions.net/reputifly', array(
        'method'      => 'POST',
        'timeout'     => 5,
        'blocking'    => false, // async sending prevents checkout delay
        'headers'     => array( 'Content-Type' => 'application/json' ),
        'body'        => wp_json_encode( $payload )
    ));
}`;
            } else if (type === 'custom') {
                title = "AI Prompt for Engineers (Claude / ChatGPT)";
                codeLang = 'language-markdown';

                let configStr = `"_to": "${toEmail}"`;
                if (isAutoReplyEnabled) {
                    configStr += `,\n  "_auto_reply": true,\n  "_auto_reply_subject": "${subject}",\n  "_sender_name": "${senderName}"`;
                    if (logo) configStr += `,\n  "_brand_logo": "${logo}"`;
                    if (cleanBody) configStr += `,\n  "_auto_reply_content": "${cleanBody}"`;
                }

                finalOutput = `You are an expert Frontend Web Developer. I need you to build a stunning, fully responsive contact form (HTML/Vanilla JS/TailwindCSS) that integrates perfectly into my client's website.

CRITICAL INSTRUCTIONS FOR API INTEGRATION:
1. The form MUST NOT refresh the page upon submission. You must intercept the submit event with JavaScript \`addEventListener('submit', ...)\`.
2. Grab the data from the form using \`FormData\`. Let the user input any names/emails/phones they want.
3. You MUST merge the following hidden system configuration data into the JSON payload exactly as provided:

\`\`\`json
{
  ${configStr}
}
\`\`\`

4. Convert the merged data into a JSON string and perform an asynchronous \`fetch()\` POST request to the API Endpoint:
   \`https://asia-southeast1-b2b-software.cloudfunctions.net/reputifly\`
   - Headers must include: \`"Content-Type": "application/json"\`
5. Show a beautiful "sending..." state on the button, and a lovely success message/toast once the response is 200 OK. Reset the form on success. Catch any errors and display them safely.

Make the design sleek, modern, and aligned with standard B2B SaaS aesthetics (glassmorphism if you want, or clean white cards). Output the fully working HTML file so I can just copy and paste it into my website builder.`;

            }

            document.getElementById('result-title').innerHTML = `<i data-feather="check-circle" class="w-5 h-5 text-green-400"></i> ` + title;

            const codeEl = document.getElementById('result-code');
            codeEl.className = codeLang;
            codeEl.textContent = finalOutput;

            Prism.highlightElement(codeEl);
            feather.replace();

            nextStep(4);
        }

        function copyResult() {
            const code = document.getElementById('result-code').textContent;
            navigator.clipboard.writeText(code);
            const btn = document.querySelector('#step-4 button[onclick="copyResult()"]');
            const orig = btn.innerHTML;
            btn.innerHTML = `<i data-feather="check" class="w-3 h-3"></i> Copied!`;
            btn.classList.add('bg-green-500/20', 'text-green-300');
            setTimeout(() => {
                btn.innerHTML = orig;
                btn.classList.remove('bg-green-500/20', 'text-green-300');
                feather.replace();
            }, 2000);
        }
    </script>
</body>

</html>
